import{_ as A,o as s,c as n,e as a}from"./app-8007fa1b.js";const e="/assets/1553906896564-45127c7f.png",l="/assets/1553907044500-56fb6625.png",t="/assets/image-20230623093134039-afa685a2.png",d="/assets/image-20230623093159673-516cd630.png",p="/assets/1553907198462-6438134f.png",c="/assets/1553907403957-e789041e.png",i="/assets/1553907849829-798af3cd.png",r="/assets/1553907875221-6ee7c297.png",o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABB4AAAA3CAYAAACrSoneAAAMAklEQVR4nO3dT2gbZxrH8V+KbbQrr/E/vDGe0ISaHqprTPAhoEIgOeiQg6AYQ3xN8eylGAzpOQWB8KU2zTWBIQR06EGULAQ6kEMwztV7WFKcEImkwYpFaneNbdAeRpJH/+yZkcaW3e8HBmLp1TPzvpoc5tH7Pu+FUqlUEgAAAAAAQAguSCLxAAAAAAAAQvHZaV8AAAAAAAA4v0g8AAAAAACA0JB4AAAAAAAAoTljiYeEUrYtu3xYZuy0Lyig89KPQzHT6mg/YqZVHR/nsHQOhqkqkersd9/peH5UvyvLPPFzAwAAAOh+ZyzxkNViPK54PK75TL5lK9OyZacSJ3hdfnnrRyhipqxuf0CMmbqXzCldHiPnmNXy+mlfmA/HjHN2sbPffafj+bG+PKv4fEanc3YAAAAA3e6MJR68WZ6NK60F2batrs4/nHWJVONMhJgpqxPjnn+rbJshAAAAAACnr6fyD9u2pXxGGSWVnJC0mlb8+XXZC9ckSavpuBazkrNMYEHOq3ll5su/RMdMWStJTaj82cXyY6P7dSeSVlevSc8r8coSqeq5JCmfmdcPuqeV5ERtPI+yi3FlK0saFlaVji+29yDrsR+JlC1XNyS1d27v8dzfS7llJiNjWpqdXW5437aThw3zGcVnl/1fXHZR8Q1T1ootJ9qK7GRemfl4sNkJdWPsvsZ8Zl6zlaCue2U1HdeiXPdOfV8avjfXPSs/971XAca5yb0/2870Di/xjhkX3+1qPmI5/29btj8cI//jCwAAAOAsKkkqKWaWLNsuWWasJKlkWnbJtlOlhFRSInX472pbq2TGyn9XjkSqZFum67VEKWXbpVSirk3dazHTqo1fPr9lWdXrqT9iZuv3Go7yOT23bzh89COVaHLu2r557YfneOXvrub6ytdc+32U29a/1uaRSNklO5VwvrPAY+z/GhMpu2Tbdsl234uJxOHYJFK17zUbKz/3fYf7EDOtkmW1uPcDjKPneF7GxU+7Zv11fw8NR/nebBaHg4ODg4ODg4ODg+PcHbVLLfKZ6i+jr3NSPvPI+WV9423t+u31ZT1enVDyXu0adnPmmlYf1/+im9fbDdef2UXF4+5fORO6k8w1/Iq/PBvXC9fvrG0pn/PF9EobRQo99qP+59vsouJpacH32gPv8RJ3klJmvu6X43IdiSAzGfyImZq5tqr0YlbLP2Sk5L2TLQK5mq6t/5DNVu8jc8Zo/LV9fVmz8xkZM6571+t9H4IJvVC84d5PK5e8oyCrVbzE8zounsevRnmW0czlI2b5HNY4YbYDAAAAcP71HN+kuexiWtftBaUSy87DQyKlZC6teP3Db/q67OpUfEfN1O/YZRkt1vP/+iKv6aAX6Faeep7PzCseaAq7x37omhZsWwvNQuTf+julz3i516dUeXF9WbNx979DTnTUWX3e6sk1oUsTOT1vNizrr5WbuK6EdOp1JPIvfm3yalZv8zO6HJPk82s9Pp7XcQkwfhNJ2bYCLY0CAAAAcH4FTjxIWT3KzGhlxpSyy86voz80edjILtYlIxJK2StKvS7/2nnEQ+CVSxOSz+f1WpW15KtKx+PtPWR66YdW9bjdWhIVPuMZQZ5Sz7UjHt6PSHadtInpr9VYMOGIh/6243kdlyDj59QfUcqWZW60rFNxWAOiA7VXAAAAAHS9tna1WF9+rNWJpFKplJK5xw3POzHTarKtZVZv87V/P8oYmqmbnx8zrbqiiv7ETEu2vSCl4w1TzwPF8tCPxbS00GQLxZhpyfa9haX3eNlHzZc4OGPQZGnJxCXXNP7y1PhzuP3H8uNcw3IgSTLvJZVrWBIUAg/jnNd0w71hWgsyKss9fPISz+u4+B6/cjIiu+gsa7JarLn5enpCTtFJkg4AAADAX8EFOcUenOr+kipV6F/fKe+msJpW/NHlcmX7xgr1zq+Xalrpvra6/aFmVfZNy1ZN03xG8y+mdU8/VNs27vDg4prebVq2kgq4U0MTfvrRtG3dbgZe++E1Xrlh3e4DLdo1idn2LgqdUrcbg5t794OW49ekv83Gz91fr/d9PD7ruztHjXOlDzW7tzRp55XfeMeNi5921TaV8a+7F2uXJDnvqVvuOQAAAAChqyYegoqZllYuPQ5lTXfMtGoSDwDOtphpaWX6RfhFTwEAAAB0jTZqPEjOzgtSZp4J0wCOt748qxOuPwoAAADglAWa8dBsqrt7Kny7GuJTJR8AAAAAgDOp7aUWAMJj2bYaq4vUaVHLAwAAAAC6AYkHAAAAAAAQmra20wQAAAAAADgKiQcAAAAAABAaEg8AAAAAACA0JB4AAAAAAEBoSDwAAAAAAIDQkHgAAAAAAAChIfEAAAAAAABCQ+IBAAAAAACEhsRDyKb6It0RIzqgqbajAAAAAADgD4mHNk0Nfq6CManCxdHGB/u+Uf00ZqhgTOpJNHisrwaM1ufwqndIT41JFYxxzQWNAQAAAACATyQe2hLR7UivdFDUrfebWlNE9y9OqjA6IEma+ntUV7Sj73Kv9M2OpL5RvTQO368RHdfTfnesevt68LHZ6/4823qnh23GAAAAAADAq57TvoAzra9fN3skaVBPjcHD13vG9HI0KkV6JfVqyZjUkvtzkTE9iX5ykhGSpAE9GYpKux80svnJw3lH9XJsUL9tvXLFAAAAAACg+5B4aMPcwGB5RsOWvrxo6OZuTleLu5Iiun/R0N3dDxrZ3NP9i4Ym/2iVJBjQE2NMX2znNFKU5qIRPdzv18uxQV2paderu2OTuut65crQuOZ2amcwzI1OakkeExhSNYmh7cq1AwAAAADQORcklU77Is6kulkHU4Of62m/9GBrRzeHBvXbdk7p4q7W5Hrvwxt9v+cOMqAnRlS/5MrJg+i4CkNRSTv6LneYUJgbndRSZL/J5xs5bYN0yFt8AAAAAAD8oMZDQHMDziyByiyGtf09aXdL3+87f9/o6avWY1j7c0cb6tXd4frikJ/0TTXBUF5ucVDUrZyXOgwDemJM6uVgsyzDvh58eKWR3OFxa9u5sGdbta+PbDkd2Nj+naQDAAAAAKDjWGoRwNTg5/rXwQf9O2KoYLjfiapQyQNExlQwxmo/2DOonwa3my5pmBsd0w3t6MFutLZeRFXjUgtJUv8/df9PZioAAAAAALoTiQffIvpq/3dd3dmV9Enf1799TM2EudFJFYzapRSKjpeXR/RJf77RSLH5mZ0lG0ftfAEAAAAAQHepJh4+fvzo6QPDw8OhXcxZ8eU/DBWGjmnUb6jQ3+rNqJZGB/Rw85OTqBjq08aBdEU7+tnDzIWN3W2tRcdVGFJtAgMAAAAAgC5TLS5J4iEM5R0rDor68f1mY4Kgb1Qvh6Vv32/r9kVDd1XUrT969XQo6v0UdVtwBi0uucGuFgAAAACAELDU4gRcOdjTQ1WSAu5lFtv69v2u1hTR7UrjnXca2ZHUF9HU3m7NcorKUovjkwSNO1RUPvtsq25bz+pOGv64ExwNMc9JLAAAAABA+0g8BFWu5XDFS9uaQpOuZRZ1iYVa/frJMFrWimjpoKhbOR/1HyqJDj+i41rSB43kPsmZ1TGuuZ2ASz66NRYAAAAAoCNIPAS1t6mruU3n332jejnWqx8b6i04Sy1u1C2H8Br/x91BLfncteJhcdPfeQKY6u3Ts/+9K//1SentqG73SQqws0a3xgIAAAAAdMZnp30B58Lepq5uSUvGpAqjAx0L+5+DfenAW8HJk7S2v6cbf6v0c0AL/dJ/A15jt8YCAAAAAHQGiYdO2dnSgwNJkajmOhRyrfhGI924bebOO906GFLBmFTBGNKrD20sZ+jWWAAAAACAjmCpRcfs6ufdfd3UljQ6qUJPUbc+Sl+0G9ZPLYkTtFZ8o5Hi+Y4FAAAAAGgfiYcOWiu+0VVJ0is9dCUMNg7amO9fqSVRiXdQ1LeBt73c0S/s8gAAAAAAOEEXJJUk6ePHj54+MDw8HOb1nCtTfRGt7QVNEgAAAAAAcPZR4yFEJB0AAAAAAH91JB4AAAAAAEBoSDwAAAAAAIDQkHgAAAAAAAChIfEAAAAAAABCQ+IBAAAAAACEhsQDAAAAAAAIDYkHAAAAAAAQmv8D/+co3wx3+RIAAAAASUVORK5CYII=",u="/assets/1553908131373-16a6edc2.png",v="data:image/png;base64,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",b={},g=a(`<p>MyISAM 存储引擎只支持表锁，这也是MySQL开始几个版本中唯一支持的锁类型。</p><h1 id="一、加锁特点" tabindex="-1"><a class="header-anchor" href="#一、加锁特点" aria-hidden="true">#</a> 一、加锁特点</h1><p>MyISAM 在执行查询语句（SELECT）前，<strong>会自动给涉及的所有表加读锁</strong>，在执行更新操作（UPDATE、DELETE、INSERT 等）前，<strong>会自动给涉及的表加写锁</strong>，这个过程并不需要用户干预，因此，用户一般不需要直接用 LOCK TABLE 命令给 MyISAM 表显式加锁。</p><p>显示加表锁语法：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>加读锁 ： <span class="token keyword">lock</span> <span class="token keyword">table</span> table_name <span class="token keyword">read</span><span class="token punctuation">;</span>
加写锁 ： <span class="token keyword">lock</span> <span class="token keyword">table</span> table_name <span class="token keyword">write</span>；
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="二、读锁案例" tabindex="-1"><a class="header-anchor" href="#二、读锁案例" aria-hidden="true">#</a> 二、读锁案例</h1><p>准备环境</p><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>create database demo_03 default charset=utf8mb4;

use demo_03;

CREATE TABLE \`tb_book\` (
  \`id\` INT(11) auto_increment,
  \`name\` VARCHAR(50) DEFAULT NULL,
  \`publish_time\` DATE DEFAULT NULL,
  \`status\` CHAR(1) DEFAULT NULL,
  PRIMARY KEY (\`id\`)
) ENGINE=myisam DEFAULT CHARSET=utf8 ;

INSERT INTO tb_book (id, name, publish_time, status) VALUES(NULL,&#39;java编程思想&#39;,&#39;2088-08-01&#39;,&#39;1&#39;);
INSERT INTO tb_book (id, name, publish_time, status) VALUES(NULL,&#39;solr编程思想&#39;,&#39;2088-08-08&#39;,&#39;0&#39;);

CREATE TABLE \`tb_user\` (
  \`id\` INT(11) auto_increment,
  \`name\` VARCHAR(50) DEFAULT NULL,
  PRIMARY KEY (\`id\`)
) ENGINE=myisam DEFAULT CHARSET=utf8 ;

INSERT INTO tb_user (id, name) VALUES(NULL,&#39;令狐冲&#39;);
INSERT INTO tb_user (id, name) VALUES(NULL,&#39;田伯光&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>客户端 一 ：</p><p>1）获得tb_book 表的读锁</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">lock</span> <span class="token keyword">table</span> tb_book <span class="token keyword">read</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2） 执行查询操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_book<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+e+`" alt="1553906896564"></p><p>可以正常执行 ， 查询出数据。</p><p>客户端 二 ：</p><p>3） 执行查询操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_book<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+l+`" alt="1553907044500"></p><p>客户端 一 ：</p><p>4）查询未锁定的表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> name <span class="token keyword">from</span> tb_user<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+t+`" alt="image-20230623093134039"></p><p>客户端 二 ：</p><p>5）查询未锁定的表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> name <span class="token keyword">from</span> tb_user<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+d+`" alt="image-20230623093159673"></p><p>可以正常查询出未锁定的表；</p><p>客户端 一 ：</p><p>6） 执行插入操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_book <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">&#39;Mysql高级&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2088-01-01&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+p+`" alt="1553907198462"></p><p>执行插入， 直接报错 ， 由于当前tb_book 获得的是 读锁， 不能执行更新操作。</p><p>客户端 二 ：</p><p>7） 执行插入操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_book <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">&#39;Mysql高级&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2088-01-01&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+c+`" alt="1553907403957"></p><p>当在客户端一中释放锁指令 <strong>unlock tables</strong> 后 ， 客户端二中的 inesrt 语句 ， 立即执行 ；</p><h1 id="三、写锁案例" tabindex="-1"><a class="header-anchor" href="#三、写锁案例" aria-hidden="true">#</a> 三、写锁案例</h1><p>客户端 一 :</p><p>1）获得tb_book 表的写锁</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">lock</span> <span class="token keyword">table</span> tb_book <span class="token keyword">write</span> <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2）执行查询操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_book <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+i+`" alt="1553907849829"></p><p>查询操作执行成功；</p><p>3）执行更新操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> tb_book <span class="token keyword">set</span> name <span class="token operator">=</span> <span class="token string">&#39;java编程思想（第二版）&#39;</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+r+`" alt="1553907875221"></p><p>更新操作执行成功 ；</p><p>客户端 二 :</p><p>4）执行查询操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tb_book <span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+o+'" alt="1553908019755"></p><p>当在客户端一中释放锁指令 unlock tables 后 ， 客户端二中的 select 语句 ， 立即执行 ；</p><p><img src="'+u+'" alt="1553908131373"></p><h1 id="四、结论" tabindex="-1"><a class="header-anchor" href="#四、结论" aria-hidden="true">#</a> 四、结论</h1><p>锁模式的相互兼容性如表中所示：</p><p><img src="'+v+'" alt="1553905621992"></p><p>由上表可见：</p><ul><li>1、对MyISAM表加读锁之后，不会阻塞其他用户对同一表的读请求，但会阻塞对同一表的写请求；</li><li>2、对MyISAM表加写锁之后，则会阻塞其他用户对同一表的读和写操作；</li></ul><p>简而言之，就是<strong>读锁会阻塞写，但是不会阻塞读。而写锁，则既会阻塞读，又会阻塞写</strong>。</p><p>此外，MyISAM 的读写锁调度是写优先，这也是MyISAM不适合做写为主的表的存储引擎的原因。<br> 因为写锁后，其他线程不能做任何操作，大量的更新会使查询很难得到锁，从而造成较长时间的阻塞。</p>',64),m=[g];function k(q,f){return s(),n("div",null,m)}const y=A(b,[["render",k],["__file","MySQL12-锁-MyISAM表锁.html.vue"]]);export{y as default};
