import{_ as n,o as s,c as a,e as p}from"./app-8007fa1b.js";const e="/assets/img001-464ff045.png",t="/assets/img002-1be51cf0.png",c="/assets/img003-93d574dc.png",o="data:image/png;base64,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",l="/assets/img005-c5c50f1e.png",i="/assets/img006-7085d599.png",u="/assets/img007-707b47fd.png",k="/assets/img008-aeb0975c.png",r="/assets/img009-2da1bcf7.png",d={},m=p('<h1 id="一、前天遗留问题" tabindex="-1"><a class="header-anchor" href="#一、前天遗留问题" aria-hidden="true">#</a> 一、前天遗留问题</h1><h2 id="_1、通过data方式发送数据失败" tabindex="-1"><a class="header-anchor" href="#_1、通过data方式发送数据失败" aria-hidden="true">#</a> 1、通过data方式发送数据失败</h2><p>问题的症结点：跨域设定问题</p><br><p><img src="'+e+`" alt="images"></p><br><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vite&#39;</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">&#39;@vitejs/plugin-vue&#39;</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://localhost:8080&#39;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p>要求：前端所有发送的请求地址都以/api开头。</p><br><p>原理：前端把请求发送到后端服务器地址，对后端来说就没有跨域的问题了，不需要为跨域做特殊操作。</p><br><h2 id="_2、列表响应数据渲染问题" tabindex="-1"><a class="header-anchor" href="#_2、列表响应数据渲染问题" aria-hidden="true">#</a> 2、列表响应数据渲染问题</h2><h3 id="_1旧做法" tabindex="-1"><a class="header-anchor" href="#_1旧做法" aria-hidden="true">#</a> ①旧做法</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建响应式对象，封装页面要显示的数据</span>
<span class="token keyword">let</span> dataList <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 调用 dataList 的 push() 方法逐个压入响应数据</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> student <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  dataList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2更好做法" tabindex="-1"><a class="header-anchor" href="#_2更好做法" aria-hidden="true">#</a> ②更好做法</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建响应式对象，封装页面要显示的数据</span>
<span class="token keyword">let</span> dataList <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

dataList<span class="token punctuation">.</span>value <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_3知识点修正" tabindex="-1"><a class="header-anchor" href="#_3知识点修正" aria-hidden="true">#</a> ③知识点修正</h3><p>具体开发时根据具体情况，看哪种情况更方便：</p><ul><li>ref：每次读写被封装的数据时需要通过value属性</li><li>reactive：直接访问数据对象本身的属性</li></ul><br><h1 id="二、微头条-搭建环境" tabindex="-1"><a class="header-anchor" href="#二、微头条-搭建环境" aria-hidden="true">#</a> 二、微头条：搭建环境</h1><h2 id="_1、前端工程" tabindex="-1"><a class="header-anchor" href="#_1、前端工程" aria-hidden="true">#</a> 1、前端工程</h2><p><img src="`+t+`" alt="imags"></p><br><p>到非中文没有空格的目录启动：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">npm</span> run dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><br><h2 id="_2、数据库建模" tabindex="-1"><a class="header-anchor" href="#_2、数据库建模" aria-hidden="true">#</a> 2、数据库建模</h2><h3 id="_1创建数据库" tabindex="-1"><a class="header-anchor" href="#_1创建数据库" aria-hidden="true">#</a> ①创建数据库</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> db_head_line230522<span class="token punctuation">;</span>
<span class="token keyword">use</span> db_head_line230522<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2执行top-news-sql" tabindex="-1"><a class="header-anchor" href="#_2执行top-news-sql" aria-hidden="true">#</a> ②执行top_news.sql</h3><p><img src="`+c+'" alt="imags"></p><br><h3 id="_3逻辑建模" tabindex="-1"><a class="header-anchor" href="#_3逻辑建模" aria-hidden="true">#</a> ③逻辑建模</h3><p><img src="'+o+`" alt="imags"></p><br><p>VO：View Object视图对象</p><ul><li>读操作：后端把数据封装到VO对象中，返回给前端显示</li><li>写操作：前端把数据封装到VO对象中，发送给后端执行新增、更新操作</li></ul><p>DO：Data Object数据对象，和数据库交互时使用<br> DTO：Data Transfer Object数据传输对象，分布式架构中，模块之间传输数据使用<br></p><h2 id="_3、引入工具类" tabindex="-1"><a class="header-anchor" href="#_3、引入工具类" aria-hidden="true">#</a> 3、引入工具类</h2><h3 id="_1md5加密" tabindex="-1"><a class="header-anchor" href="#_1md5加密" aria-hidden="true">#</a> ①MD5加密</h3><ul><li>用途：密码不能在数据库中进行明文保存，必须是以密文形式保存。</li><li>技术：MD5是HASH加密算法的一种。</li></ul><br><h3 id="_2代码" tabindex="-1"><a class="header-anchor" href="#_2代码" aria-hidden="true">#</a> ②代码</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>util</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">MessageDigest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">NoSuchAlgorithmException</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">MD5Util</span> <span class="token punctuation">{</span>
	<span class="token doc-comment comment">/**  
	 * 对明文字符串做加密操作  
	 * <span class="token keyword">@param</span> <span class="token parameter">strSrc</span> 明文字符串  
	 * <span class="token keyword">@return</span> 加密以后的密文  
	 */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token class-name">String</span> strSrc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">char</span> hexChars<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token char">&#39;0&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;3&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;4&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;5&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;6&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;7&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;8&#39;</span><span class="token punctuation">,</span>
                    <span class="token char">&#39;9&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;c&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;f&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> strSrc<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MessageDigest</span> md <span class="token operator">=</span> <span class="token class-name">MessageDigest</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">&quot;MD5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            md<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
            bytes <span class="token operator">=</span> md<span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> j <span class="token operator">=</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>j <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> bytes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">byte</span> b <span class="token operator">=</span> bytes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                chars<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> hexChars<span class="token punctuation">[</span>b <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">4</span> <span class="token operator">&amp;</span> <span class="token number">0xf</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                chars<span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> hexChars<span class="token punctuation">[</span>b <span class="token operator">&amp;</span> <span class="token number">0xf</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchAlgorithmException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;MD5加密出错！！+&quot;</span> <span class="token operator">+</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2jwt-token" tabindex="-1"><a class="header-anchor" href="#_2jwt-token" aria-hidden="true">#</a> ②JWT token</h3><p>JWT是帮助我们生成一个token值的加密工具。<br></p><h4 id="_1-token的作用" tabindex="-1"><a class="header-anchor" href="#_1-token的作用" aria-hidden="true">#</a> [1]token的作用</h4><p>token单词是“令牌”的意思。<br></p><ul><li>用户在登录系统时，经过用户名、密码的检查，确认用户可以登录。</li><li>系统就给前端程序返回一个token。</li><li>然后token在前端浏览器这边保存下来，作为用户已登录的身份凭据。</li><li>以后用户每次访问系统，都携带token值。</li><li>服务器端从请求信息中读取到token，然后检查token是否有效。 <ul><li>token有效：认可用户的身份，允许用户后续操作</li><li>token无效：不认可用户的身份，禁止用户后续操作</li></ul></li></ul><br><h4 id="_2-前端维护token的机制" tabindex="-1"><a class="header-anchor" href="#_2-前端维护token的机制" aria-hidden="true">#</a> [2]前端维护token的机制</h4><ul><li>发送登录请求 <img src="`+l+'" alt="images"></li></ul><br><ul><li>保存token <img src="'+i+'" alt="images"></li></ul><br><ul><li>每次请求时携带token值 <img src="'+u+'" alt="images"></li></ul><br><h4 id="_3-导入jar包" tabindex="-1"><a class="header-anchor" href="#_3-导入jar包" aria-hidden="true">#</a> [3]导入jar包</h4><p><img src="'+k+'" alt="images"><br></p><p><img src="'+r+`" alt="images"></p><br><h4 id="_4-工具类代码" tabindex="-1"><a class="header-anchor" href="#_4-工具类代码" aria-hidden="true">#</a> [4]工具类代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">StringUtils</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>jsonwebtoken<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JwtHelper</span> <span class="token punctuation">{</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">long</span> tokenExpiration <span class="token operator">=</span> <span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">;</span>  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">String</span> tokenSignKey <span class="token operator">=</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span>  
  
    <span class="token comment">// 生成token字符串  </span>
    <span class="token comment">// .setExpiration(new Date(System.currentTimeMillis() + tokenExpiration))指定 token 过期时间  </span>
    <span class="token comment">// .claim(&quot;userId&quot;, userId) 根据 userId 生成 token    public static String createToken(Long userId) {  </span>
        <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
  
                <span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;YYGH-USER&quot;</span><span class="token punctuation">)</span>  
                <span class="token punctuation">.</span><span class="token function">setExpiration</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> tokenExpiration<span class="token punctuation">)</span><span class="token punctuation">)</span>  
                <span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">,</span> userId<span class="token punctuation">)</span>  
                <span class="token punctuation">.</span><span class="token function">signWith</span><span class="token punctuation">(</span><span class="token class-name">SignatureAlgorithm</span><span class="token punctuation">.</span><span class="token constant">HS512</span><span class="token punctuation">,</span> tokenSignKey<span class="token punctuation">)</span>  
                <span class="token punctuation">.</span><span class="token function">compressWith</span><span class="token punctuation">(</span><span class="token class-name">CompressionCodecs</span><span class="token punctuation">.</span><span class="token constant">GZIP</span><span class="token punctuation">)</span>  
                <span class="token punctuation">.</span><span class="token function">compact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">return</span> token<span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
    <span class="token comment">// 从 token 字符串获取 userId    public static Long getUserId(String token) {  </span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  
        <span class="token class-name">Jws</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Claims</span><span class="token punctuation">&gt;</span></span> claimsJws <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>tokenSignKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">Claims</span> claims <span class="token operator">=</span> claimsJws<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token class-name">Integer</span> userId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">)</span>claims<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token keyword">return</span> userId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
  
  
    <span class="token doc-comment comment">/**  
     * 判断 token 是否有效  
     * <span class="token keyword">@param</span> <span class="token parameter">token</span>  
     * <span class="token keyword">@return</span> 返回 boolean 类型数据  
     *      true：过期  
     *      false：没有过期  
     */</span>  
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isExpiration</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span><span class="token punctuation">{</span>  
        <span class="token keyword">try</span> <span class="token punctuation">{</span>  
            <span class="token keyword">boolean</span> isExpire <span class="token operator">=</span> <span class="token class-name">Jwts</span><span class="token punctuation">.</span><span class="token function">parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
                    <span class="token punctuation">.</span><span class="token function">setSigningKey</span><span class="token punctuation">(</span>tokenSignKey<span class="token punctuation">)</span>  
                    <span class="token punctuation">.</span><span class="token function">parseClaimsJws</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>  
                    <span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
                    <span class="token punctuation">.</span><span class="token function">getExpiration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token comment">// 没有过期，有效，返回 false            return isExpire;  </span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token comment">// 过期出现异常，返回 true            return true;  </span>
        <span class="token punctuation">}</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="三、微头条-具体功能" tabindex="-1"><a class="header-anchor" href="#三、微头条-具体功能" aria-hidden="true">#</a> 三、微头条：具体功能</h1><h2 id="_1、登录功能" tabindex="-1"><a class="header-anchor" href="#_1、登录功能" aria-hidden="true">#</a> 1、登录功能</h2><ul><li>接收前端发送过来的数据：用户名、密码</li><li>在服务器端检查用户名、密码是否正确</li><li>给前端返回响应数据</li></ul><h3 id="_1controller层代码" tabindex="-1"><a class="header-anchor" href="#_1controller层代码" aria-hidden="true">#</a> ①Controller层代码</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">NewsUser</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>service<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">NewsUserService</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">NewsUserServiceImpl</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">ServletException</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebServlet</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">jakarta<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>  
  
<span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">&quot;/user/*&quot;</span><span class="token punctuation">)</span>  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewsUserController</span> <span class="token keyword">extends</span> <span class="token class-name">BaseController</span><span class="token punctuation">{</span>  
  
    <span class="token keyword">private</span> <span class="token class-name">NewsUserService</span> newsUserService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NewsUserServiceImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>  
  
        <span class="token comment">// 1、从请求体读取 NewsUser 对象  </span>
        <span class="token class-name">NewsUser</span> newsUser <span class="token operator">=</span> <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">readJson</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token class-name">NewsUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// 2、调用业务逻辑层的方法执行登录逻辑  </span>
        <span class="token class-name">Result</span> result <span class="token operator">=</span> newsUserService<span class="token punctuation">.</span><span class="token function">doLogin</span><span class="token punctuation">(</span>newsUser<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// 3、根据 Result 对象返回响应结果  </span>
        <span class="token class-name">WebUtil</span><span class="token punctuation">.</span><span class="token function">writeJson</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><h3 id="_2service层代码" tabindex="-1"><a class="header-anchor" href="#_2service层代码" aria-hidden="true">#</a> ②Service层代码</h3><h4 id="_1-接口" tabindex="-1"><a class="header-anchor" href="#_1-接口" aria-hidden="true">#</a> [1]接口</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>service<span class="token punctuation">.</span>api</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">NewsUser</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NewsUserService</span> <span class="token punctuation">{</span>  
    <span class="token doc-comment comment">/**  
     * 执行登录过程的业务逻辑操作  
     * <span class="token keyword">@param</span> <span class="token parameter">newsUser</span> 前端传过来的用户对象  
     * <span class="token keyword">@return</span> 登录逻辑处理完成之后返回 Result 对象  
     */</span>  
    <span class="token class-name">Result</span> <span class="token function">doLogin</span><span class="token punctuation">(</span><span class="token class-name">NewsUser</span> newsUser<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-实现类" tabindex="-1"><a class="header-anchor" href="#_2-实现类" aria-hidden="true">#</a> [2]实现类</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>service<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">NewsUserDao</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span><span class="token class-name">NewsUserDaoImpl</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">NewsUser</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>service<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">NewsUserService</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">JwtHelper</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">MD5Util</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Result</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">ResultCodeEnum</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewsUserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">NewsUserService</span> <span class="token punctuation">{</span>  
  
    <span class="token keyword">private</span> <span class="token class-name">NewsUserDao</span> newsUserDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">NewsUserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">doLogin</span><span class="token punctuation">(</span><span class="token class-name">NewsUser</span> newsUserFromFront<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  
        <span class="token comment">// 1、检查用户名  </span>
        <span class="token comment">// [1]获取用户名数据  </span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> newsUserFromFront<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// [2]根据用户名到数据库查询 NewsUser 对象  </span>
        <span class="token class-name">NewsUser</span> newsUserFromDB <span class="token operator">=</span> newsUserDao<span class="token punctuation">.</span><span class="token function">selectUserByName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// [3]判断 newsUserFromDB 是否为空  </span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>newsUserFromDB <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token comment">// [4]如果 newsUserFromDB 对象为空，则直接返回用户名错误的 Result，流程结束  </span>
            <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ResultCodeEnum</span><span class="token punctuation">.</span><span class="token constant">USERNAME_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
  
        <span class="token comment">// 2、检查密码  </span>
        <span class="token comment">// [1]获取明文密码数据：来自于前端请求  </span>
        <span class="token class-name">String</span> userPwdNotEncoded <span class="token operator">=</span> newsUserFromFront<span class="token punctuation">.</span><span class="token function">getUserPwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// [2]获取密文密码数据：来自于数据库查询结果  </span>
        <span class="token class-name">String</span> userPwdEncoded <span class="token operator">=</span> newsUserFromDB<span class="token punctuation">.</span><span class="token function">getUserPwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// [3]对 userPwdEncoded 做判空保护  </span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>userPwdEncoded <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> userPwdEncoded<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token comment">// ※返回一个系统错误：程序正常运行的时候不应该发生的问题  </span>
            <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ResultCodeEnum</span><span class="token punctuation">.</span><span class="token constant">SYSTEM_ERR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
  
        <span class="token comment">// [4]对明文密码做加密操作，然后比较两个密文  </span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userPwdEncoded<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">MD5Util</span><span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>userPwdNotEncoded<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  
            <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">ResultCodeEnum</span><span class="token punctuation">.</span><span class="token constant">PASSWORD_ERROR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>  
  
        <span class="token comment">// 3、登录成功  </span>
        <span class="token comment">// [1]调用“从数据库查询出来的 NewsUser 对象”的 getUserId() 方法获取 userId        Integer uid = newsUserFromDB.getUid();  </span>
  
        <span class="token comment">// [2]调用工具方法生成 token 值  </span>
        <span class="token class-name">String</span> token <span class="token operator">=</span> <span class="token class-name">JwtHelper</span><span class="token punctuation">.</span><span class="token function">createToken</span><span class="token punctuation">(</span>uid<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// [3]根据前端所需要的响应数据格式，把 token 存入 Map 中  </span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tokenMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        tokenMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>  
  
        <span class="token comment">// [4]根据 Map 创建 Result 对象  </span>
        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span>tokenMap<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3dao层代码" tabindex="-1"><a class="header-anchor" href="#_3dao层代码" aria-hidden="true">#</a> ③Dao层代码</h3><h4 id="_1-接口-1" tabindex="-1"><a class="header-anchor" href="#_1-接口-1" aria-hidden="true">#</a> [1]接口</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>api</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">NewsUser</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">NewsUserDao</span> <span class="token punctuation">{</span>  
    <span class="token doc-comment comment">/**  
     * 根据用户名查询用户对象  
     * <span class="token keyword">@param</span> <span class="token parameter">username</span>  
     * <span class="token keyword">@return</span>  
     */</span>    <span class="token class-name">NewsUser</span> <span class="token function">selectUserByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-实现类-1" tabindex="-1"><a class="header-anchor" href="#_2-实现类-1" aria-hidden="true">#</a> [2]实现类</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>impl</span><span class="token punctuation">;</span>  
  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>dao<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">NewsUserDao</span></span><span class="token punctuation">;</span>  
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>atguigu<span class="token punctuation">.</span>headline<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">NewsUser</span></span><span class="token punctuation">;</span>  
  
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NewsUserDaoImpl</span> <span class="token keyword">extends</span> <span class="token class-name">BaseDao</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">NewsUser</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">NewsUserDao</span> <span class="token punctuation">{</span>  
  
    <span class="token annotation punctuation">@Override</span>  
    <span class="token keyword">public</span> <span class="token class-name">NewsUser</span> <span class="token function">selectUserByName</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
  
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select uid, username, user_pwd userPwd, nick_name nickName from news_user where username=?&quot;</span><span class="token punctuation">;</span>  
  
        <span class="token keyword">return</span> <span class="token function">getSingleBean</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">NewsUser</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2、根据token获取用户信息" tabindex="-1"><a class="header-anchor" href="#_2、根据token获取用户信息" aria-hidden="true">#</a> 2、根据token获取用户信息</h2><h3 id="_1需求说明" tabindex="-1"><a class="header-anchor" href="#_1需求说明" aria-hidden="true">#</a> ①需求说明</h3><ul><li>用户发送请求，在请求体携带token</li><li>后端从请求体读取token</li><li>从token中解析出userId</li><li>根据userId查询到用户的完整信息</li><li>在用户完整信息中擦除密码部分</li><li>返回用户完整信息</li></ul>`,88),v=[m];function b(h,g){return s(),a("div",null,v)}const y=n(d,[["render",b],["__file","微头条01.html.vue"]]);export{y as default};
