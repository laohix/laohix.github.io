<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>1 Gateway组件 | 老嗨学Java</title><meta name="description" content="老嗨的Java学习笔记">
    <link rel="preload" href="/assets/style-996fc24a.css" as="style"><link rel="stylesheet" href="/assets/style-996fc24a.css">
    <link rel="modulepreload" href="/assets/app-8007fa1b.js"><link rel="modulepreload" href="/assets/day12课件.html-64b71d8a.js"><link rel="modulepreload" href="/assets/day12课件.html-98726a91.js"><link rel="prefetch" href="/assets/index.html-1fb086bf.js" as="script"><link rel="prefetch" href="/assets/0、消息队列-Kafka.html-3142c93a.js" as="script"><link rel="prefetch" href="/assets/1、架构师核心-云计算基础.html-f8db19e6.js" as="script"><link rel="prefetch" href="/assets/2、架构师核心-云上演练场.html-294ec799.js" as="script"><link rel="prefetch" href="/assets/3、附录：中间件与环境安装文档.html-f88cf549.js" as="script"><link rel="prefetch" href="/assets/ds.html-64ee17f4.js" as="script"><link rel="prefetch" href="/assets/MySQL01-安装.html-ef2d6cfe.js" as="script"><link rel="prefetch" href="/assets/MySQL02-逻辑架构.html-dd8a9d98.js" as="script"><link rel="prefetch" href="/assets/MySQL03-索引-主键索引.html-57f374d4.js" as="script"><link rel="prefetch" href="/assets/MySQL04-索引-非主键索引.html-e769d107.js" as="script"><link rel="prefetch" href="/assets/MySQL05-优化-Explain分析.html-e80eb7d4.js" as="script"><link rel="prefetch" href="/assets/MySQL06-优化-索引失效.html-c3d49833.js" as="script"><link rel="prefetch" href="/assets/MySQL07-优化-专题.html-cbaa7c1b.js" as="script"><link rel="prefetch" href="/assets/MySQL08-优化-索引总结.html-cf824359.js" as="script"><link rel="prefetch" href="/assets/MySQL09-日志-基础日志.html-9832c63b.js" as="script"><link rel="prefetch" href="/assets/MySQL10-日志-事务日志.html-558640e9.js" as="script"><link rel="prefetch" href="/assets/MySQL11-锁-概述.html-c7025812.js" as="script"><link rel="prefetch" href="/assets/MySQL12-锁-MyISAM表锁.html-66352f40.js" as="script"><link rel="prefetch" href="/assets/MySQL13-锁-InnoDB行锁.html-a8c8a598.js" as="script"><link rel="prefetch" href="/assets/MySQL14-MVCC-快照读和当前读.html-2a23e453.js" as="script"><link rel="prefetch" href="/assets/MySQL15-MVCC-隐藏字段以及Undo Log版本链.html-b5f03e7e.js" as="script"><link rel="prefetch" href="/assets/MySQL16-MVCC-ReadView.html-fd666988.js" as="script"><link rel="prefetch" href="/assets/MySQL17-ShardingSphere.html-38cdd855.js" as="script"><link rel="prefetch" href="/assets/00-环境安装.html-f6f66c10.js" as="script"><link rel="prefetch" href="/assets/01-前端部署.html-bd30cdc7.js" as="script"><link rel="prefetch" href="/assets/02-ElasticSearch入门.html-b6b10d96.js" as="script"><link rel="prefetch" href="/assets/03-MongoDB入门.html-d0f23e1b.js" as="script"><link rel="prefetch" href="/assets/第10章 直播.html-21264b1c.js" as="script"><link rel="prefetch" href="/assets/第1章 专辑管理.html-ba227dcb.js" as="script"><link rel="prefetch" href="/assets/第2章 声音管理.html-e2e4a539.js" as="script"><link rel="prefetch" href="/assets/第3章 用户登录.html-b6bb26c6.js" as="script"><link rel="prefetch" href="/assets/第4章 检索模块.html-776318b0.js" as="script"><link rel="prefetch" href="/assets/第5章 详情介绍.html-348287aa.js" as="script"><link rel="prefetch" href="/assets/第6章 详情优化.html-e61bbb06.js" as="script"><link rel="prefetch" href="/assets/第7章 订单.html-e648baec.js" as="script"><link rel="prefetch" href="/assets/第8章 支付.html-1f9a2246.js" as="script"><link rel="prefetch" href="/assets/第9章 分布式任务调度.html-9518f9c4.js" as="script"><link rel="prefetch" href="/assets/高频面试题.html-fae5b787.js" as="script"><link rel="prefetch" href="/assets/人事面试.html-ff795090.js" as="script"><link rel="prefetch" href="/assets/01-多线程回顾.html-e1120012.js" as="script"><link rel="prefetch" href="/assets/02-synchronized.html-5c77ae5a.js" as="script"><link rel="prefetch" href="/assets/03-Lock操作.html-5630e0d7.js" as="script"><link rel="prefetch" href="/assets/04-Lock原理.html-e8bd23a7.js" as="script"><link rel="prefetch" href="/assets/05-集合.html-3c585021.js" as="script"><link rel="prefetch" href="/assets/06-ThreadPool.html-793a3dc0.js" as="script"><link rel="prefetch" href="/assets/07-CompletableFuture.html-364166ac.js" as="script"><link rel="prefetch" href="/assets/01-JVM-概述.html-cee4faef.js" as="script"><link rel="prefetch" href="/assets/02-JVM-类加载机制.html-1c524af3.js" as="script"><link rel="prefetch" href="/assets/03-JVM-不重要部分.html-c947bf70.js" as="script"><link rel="prefetch" href="/assets/04-JVM-执行引擎.html-47720212.js" as="script"><link rel="prefetch" href="/assets/05-JVM-方法区.html-48ea6010.js" as="script"><link rel="prefetch" href="/assets/06-JVM-Java栈.html-b2180fe3.js" as="script"><link rel="prefetch" href="/assets/07-JVM-堆.html-4b788c63.js" as="script"><link rel="prefetch" href="/assets/08-JVM-GC.html-29439b6b.js" as="script"><link rel="prefetch" href="/assets/JAVASE晨考题.html-f05dc822.js" as="script"><link rel="prefetch" href="/assets/day01 Java语言概述.html-1fda3bb6.js" as="script"><link rel="prefetch" href="/assets/写在前面.html-fc337683.js" as="script"><link rel="prefetch" href="/assets/day02 变量和数据类型.html-8f407b2a.js" as="script"><link rel="prefetch" href="/assets/day03 变量和数据类型.html-8ffaaef9.js" as="script"><link rel="prefetch" href="/assets/day04 分支结构和循环结构.html-e9d16eab.js" as="script"><link rel="prefetch" href="/assets/day05 循环结构.html-9a795d54.js" as="script"><link rel="prefetch" href="/assets/day06-方法和数组.html-d20d5969.js" as="script"><link rel="prefetch" href="/assets/day07-数组和排序.html-25cf3e27.js" as="script"><link rel="prefetch" href="/assets/day08-初识面向对象.html-b5ffade8.js" as="script"><link rel="prefetch" href="/assets/day09-封装和继承.html-4c9bf841.js" as="script"><link rel="prefetch" href="/assets/day10-方法重写和多态.html-0cfbdb5f.js" as="script"><link rel="prefetch" href="/assets/day11-方法重写和多态.html-a25b783a.js" as="script"><link rel="prefetch" href="/assets/day12-多态和抽象类.html-44222e8f.js" as="script"><link rel="prefetch" href="/assets/day13-接口与异常.html-4d10591b.js" as="script"><link rel="prefetch" href="/assets/day14-常用类API.html-edf36def.js" as="script"><link rel="prefetch" href="/assets/day16-常用类与集合.html-64cf7598.js" as="script"><link rel="prefetch" href="/assets/day17-IO.html-e6768eb8.js" as="script"><link rel="prefetch" href="/assets/day19-多线程.html-503428c5.js" as="script"><link rel="prefetch" href="/assets/day20-网络编程.html-37af4547.js" as="script"><link rel="prefetch" href="/assets/day21-注解和反射.html-a3730ee5.js" as="script"><link rel="prefetch" href="/assets/day22-JDK8新特性1.html-b9b55bd7.js" as="script"><link rel="prefetch" href="/assets/day22-JDK8新特性2.html-f6df570b.js" as="script"><link rel="prefetch" href="/assets/day23-JDK8-17新特性.html-3abaf41a.js" as="script"><link rel="prefetch" href="/assets/晨考题.html-de57ad6d.js" as="script"><link rel="prefetch" href="/assets/01_第一章 WEB开发概述.html-1dbbd30a.js" as="script"><link rel="prefetch" href="/assets/02_第二章 HTML_CSS.html-916f46d2.js" as="script"><link rel="prefetch" href="/assets/03_第三章 JavaScript.html-7a90e1eb.js" as="script"><link rel="prefetch" href="/assets/04_第四章 XML_Tomcat_HTTP.html-bf50e831.js" as="script"><link rel="prefetch" href="/assets/05_第五章 Servlet.html-23be7265.js" as="script"><link rel="prefetch" href="/assets/06_第六章 会话_过滤器_监听器.html-635c5880.js" as="script"><link rel="prefetch" href="/assets/07_第七章 前端工程化.html-cb13aec6.js" as="script"><link rel="prefetch" href="/assets/08_第八章 微头条项目开发.html-5106e762.js" as="script"><link rel="prefetch" href="/assets/note01-mysql.html-66233436.js" as="script"><link rel="prefetch" href="/assets/note02-JDBC.html-bea658fa.js" as="script"><link rel="prefetch" href="/assets/03-javascript.html-5a613b89.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-bbe14e67.js" as="script"><link rel="prefetch" href="/assets/Servlet.html-15a69ca2.js" as="script"><link rel="prefetch" href="/assets/06-请求响应.html-f9615c07.js" as="script"><link rel="prefetch" href="/assets/07-会话控制1.html-aab5f854.js" as="script"><link rel="prefetch" href="/assets/07-会话控制2.html-2f3ad241.js" as="script"><link rel="prefetch" href="/assets/08-前端工程化.html-413f0190.js" as="script"><link rel="prefetch" href="/assets/vue01.html-b972244d.js" as="script"><link rel="prefetch" href="/assets/vue02.html-9fe9d760.js" as="script"><link rel="prefetch" href="/assets/路由PiniaAjax.html-09ab172d.js" as="script"><link rel="prefetch" href="/assets/基本CURD.html-2f1c2355.js" as="script"><link rel="prefetch" href="/assets/微头条01.html-47ed86a9.js" as="script"><link rel="prefetch" href="/assets/微头条02.html-b6559f52.js" as="script"><link rel="prefetch" href="/assets/day01课件.html-78ada56a.js" as="script"><link rel="prefetch" href="/assets/day02课件.html-6cda48fe.js" as="script"><link rel="prefetch" href="/assets/day03课件.html-365d52f1.js" as="script"><link rel="prefetch" href="/assets/day04课件.html-58fc8ec8.js" as="script"><link rel="prefetch" href="/assets/day05课件.html-bceea261.js" as="script"><link rel="prefetch" href="/assets/day06课件.html-f2e0dd53.js" as="script"><link rel="prefetch" href="/assets/day07课件.html-f13f9eeb.js" as="script"><link rel="prefetch" href="/assets/day08课件.html-0fb61cba.js" as="script"><link rel="prefetch" href="/assets/day09课件.html-e38e203c.js" as="script"><link rel="prefetch" href="/assets/day10课件.html-1c68030a.js" as="script"><link rel="prefetch" href="/assets/day11课件.html-781dba6c.js" as="script"><link rel="prefetch" href="/assets/day13课件.html-603dd7ea.js" as="script"><link rel="prefetch" href="/assets/day14课件.html-d5c5551a.js" as="script"><link rel="prefetch" href="/assets/day15课件.html-e88ed510.js" as="script"><link rel="prefetch" href="/assets/day16课件.html-dbf17c3c.js" as="script"><link rel="prefetch" href="/assets/day17课件.html-93ffeb00.js" as="script"><link rel="prefetch" href="/assets/day18课件.html-4b062541.js" as="script"><link rel="prefetch" href="/assets/day19课件.html-1c8f6498.js" as="script"><link rel="prefetch" href="/assets/01_Maven依赖管理项目构建工具.html-bc144dc3.js" as="script"><link rel="prefetch" href="/assets/02_Spring企业开发核心框架.html-bebdf320.js" as="script"><link rel="prefetch" href="/assets/03_SpringMVC控制层框架.html-58845fc3.js" as="script"><link rel="prefetch" href="/assets/04_MyBatis持久层框架.html-cfa16061.js" as="script"><link rel="prefetch" href="/assets/05_SSM整合实战.html-d42afd8d.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-f49748d8.js" as="script"><link rel="prefetch" href="/assets/Linux.html-37b694e1.js" as="script"><link rel="prefetch" href="/assets/Redis.html-cc9ca178.js" as="script"><link rel="prefetch" href="/assets/Git.html-aa4ccf6c.js" as="script"><link rel="prefetch" href="/assets/Git补充.html-83d43827.js" as="script"><link rel="prefetch" href="/assets/微博客项目.html-d3c5e15a.js" as="script"><link rel="prefetch" href="/assets/JAVASE.html-b104e62b.js" as="script"><link rel="prefetch" href="/assets/集合类.html-9bae3066.js" as="script"><link rel="prefetch" href="/assets/MyBatis.html-065d1ba8.js" as="script"><link rel="prefetch" href="/assets/Spring、SpringMVC、SpringBoot.html-31a101c0.js" as="script"><link rel="prefetch" href="/assets/SpringCloud.html-0e969995.js" as="script"><link rel="prefetch" href="/assets/JVM.html-2eae294b.js" as="script"><link rel="prefetch" href="/assets/JUC.html-ded2f895.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-4d672801.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-64f7651f.js" as="script"><link rel="prefetch" href="/assets/Redis.html-18608ca0.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-0d0cf47c.js" as="script"><link rel="prefetch" href="/assets/Cloud核心中间件.html-dc3c7549.js" as="script"><link rel="prefetch" href="/assets/ElasticSearch.html-b09f50b1.js" as="script"><link rel="prefetch" href="/assets/微服务、分布式.html-048e20f6.js" as="script"><link rel="prefetch" href="/assets/线程、并发.html-ed282712.js" as="script"><link rel="prefetch" href="/assets/场景题.html-6a7ca62a.js" as="script"><link rel="prefetch" href="/assets/项目上线问题排查.html-2297b364.js" as="script"><link rel="prefetch" href="/assets/Netty.html-b0e1ae6d.js" as="script"><link rel="prefetch" href="/assets/Tomcat.html-2e8a636f.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-4f990e17.js" as="script"><link rel="prefetch" href="/assets/云计算.html-b54dfe1a.js" as="script"><link rel="prefetch" href="/assets/404.html-e7f61752.js" as="script"><link rel="prefetch" href="/assets/index.html-02daf10d.js" as="script"><link rel="prefetch" href="/assets/0、消息队列-Kafka.html-2d86f9f0.js" as="script"><link rel="prefetch" href="/assets/1、架构师核心-云计算基础.html-3fb6b2bb.js" as="script"><link rel="prefetch" href="/assets/2、架构师核心-云上演练场.html-4ac7655d.js" as="script"><link rel="prefetch" href="/assets/3、附录：中间件与环境安装文档.html-f2a9f5a6.js" as="script"><link rel="prefetch" href="/assets/ds.html-963bdbcc.js" as="script"><link rel="prefetch" href="/assets/MySQL01-安装.html-9e7a5142.js" as="script"><link rel="prefetch" href="/assets/MySQL02-逻辑架构.html-e49c9908.js" as="script"><link rel="prefetch" href="/assets/MySQL03-索引-主键索引.html-1a0009d1.js" as="script"><link rel="prefetch" href="/assets/MySQL04-索引-非主键索引.html-f99af40f.js" as="script"><link rel="prefetch" href="/assets/MySQL05-优化-Explain分析.html-10d50fe7.js" as="script"><link rel="prefetch" href="/assets/MySQL06-优化-索引失效.html-1f40389e.js" as="script"><link rel="prefetch" href="/assets/MySQL07-优化-专题.html-bf0d0920.js" as="script"><link rel="prefetch" href="/assets/MySQL08-优化-索引总结.html-1f06e38f.js" as="script"><link rel="prefetch" href="/assets/MySQL09-日志-基础日志.html-8939defd.js" as="script"><link rel="prefetch" href="/assets/MySQL10-日志-事务日志.html-a586301b.js" as="script"><link rel="prefetch" href="/assets/MySQL11-锁-概述.html-a1ff4680.js" as="script"><link rel="prefetch" href="/assets/MySQL12-锁-MyISAM表锁.html-431bac20.js" as="script"><link rel="prefetch" href="/assets/MySQL13-锁-InnoDB行锁.html-a550ace3.js" as="script"><link rel="prefetch" href="/assets/MySQL14-MVCC-快照读和当前读.html-0b5a3729.js" as="script"><link rel="prefetch" href="/assets/MySQL15-MVCC-隐藏字段以及Undo Log版本链.html-a1c6776e.js" as="script"><link rel="prefetch" href="/assets/MySQL16-MVCC-ReadView.html-c1e51ff3.js" as="script"><link rel="prefetch" href="/assets/MySQL17-ShardingSphere.html-ed9efe7d.js" as="script"><link rel="prefetch" href="/assets/00-环境安装.html-934d4fa1.js" as="script"><link rel="prefetch" href="/assets/01-前端部署.html-7ecf4dba.js" as="script"><link rel="prefetch" href="/assets/02-ElasticSearch入门.html-283dbe77.js" as="script"><link rel="prefetch" href="/assets/03-MongoDB入门.html-69a4a4a8.js" as="script"><link rel="prefetch" href="/assets/第10章 直播.html-c8aafb0d.js" as="script"><link rel="prefetch" href="/assets/第1章 专辑管理.html-4b625176.js" as="script"><link rel="prefetch" href="/assets/第2章 声音管理.html-a806b421.js" as="script"><link rel="prefetch" href="/assets/第3章 用户登录.html-5618a773.js" as="script"><link rel="prefetch" href="/assets/第4章 检索模块.html-e6d05c7b.js" as="script"><link rel="prefetch" href="/assets/第5章 详情介绍.html-aaad695e.js" as="script"><link rel="prefetch" href="/assets/第6章 详情优化.html-af2c56ba.js" as="script"><link rel="prefetch" href="/assets/第7章 订单.html-7935e820.js" as="script"><link rel="prefetch" href="/assets/第8章 支付.html-09c56a16.js" as="script"><link rel="prefetch" href="/assets/第9章 分布式任务调度.html-65b3eeb8.js" as="script"><link rel="prefetch" href="/assets/高频面试题.html-57ddba99.js" as="script"><link rel="prefetch" href="/assets/人事面试.html-c67b53f2.js" as="script"><link rel="prefetch" href="/assets/01-多线程回顾.html-ad14fe66.js" as="script"><link rel="prefetch" href="/assets/02-synchronized.html-6c81e2b1.js" as="script"><link rel="prefetch" href="/assets/03-Lock操作.html-d9a75c60.js" as="script"><link rel="prefetch" href="/assets/04-Lock原理.html-452ff47f.js" as="script"><link rel="prefetch" href="/assets/05-集合.html-c22f2e16.js" as="script"><link rel="prefetch" href="/assets/06-ThreadPool.html-1c996064.js" as="script"><link rel="prefetch" href="/assets/07-CompletableFuture.html-157d75ee.js" as="script"><link rel="prefetch" href="/assets/01-JVM-概述.html-0a8f706a.js" as="script"><link rel="prefetch" href="/assets/02-JVM-类加载机制.html-24c2246f.js" as="script"><link rel="prefetch" href="/assets/03-JVM-不重要部分.html-593529e8.js" as="script"><link rel="prefetch" href="/assets/04-JVM-执行引擎.html-d664c70a.js" as="script"><link rel="prefetch" href="/assets/05-JVM-方法区.html-044e94ca.js" as="script"><link rel="prefetch" href="/assets/06-JVM-Java栈.html-f040f620.js" as="script"><link rel="prefetch" href="/assets/07-JVM-堆.html-eb771867.js" as="script"><link rel="prefetch" href="/assets/08-JVM-GC.html-b6a06b6f.js" as="script"><link rel="prefetch" href="/assets/JAVASE晨考题.html-aa2c8513.js" as="script"><link rel="prefetch" href="/assets/day01 Java语言概述.html-47e50702.js" as="script"><link rel="prefetch" href="/assets/写在前面.html-b82db28d.js" as="script"><link rel="prefetch" href="/assets/day02 变量和数据类型.html-c57f144c.js" as="script"><link rel="prefetch" href="/assets/day03 变量和数据类型.html-20aedf99.js" as="script"><link rel="prefetch" href="/assets/day04 分支结构和循环结构.html-7fc993ca.js" as="script"><link rel="prefetch" href="/assets/day05 循环结构.html-e431d1d8.js" as="script"><link rel="prefetch" href="/assets/day06-方法和数组.html-3570ba0b.js" as="script"><link rel="prefetch" href="/assets/day07-数组和排序.html-5239b286.js" as="script"><link rel="prefetch" href="/assets/day08-初识面向对象.html-4bbdb62d.js" as="script"><link rel="prefetch" href="/assets/day09-封装和继承.html-32328569.js" as="script"><link rel="prefetch" href="/assets/day10-方法重写和多态.html-e16e8952.js" as="script"><link rel="prefetch" href="/assets/day11-方法重写和多态.html-8ce01638.js" as="script"><link rel="prefetch" href="/assets/day12-多态和抽象类.html-2749500d.js" as="script"><link rel="prefetch" href="/assets/day13-接口与异常.html-fcd02458.js" as="script"><link rel="prefetch" href="/assets/day14-常用类API.html-a496e9e8.js" as="script"><link rel="prefetch" href="/assets/day16-常用类与集合.html-0713bcc6.js" as="script"><link rel="prefetch" href="/assets/day17-IO.html-92c3608d.js" as="script"><link rel="prefetch" href="/assets/day19-多线程.html-68ca3126.js" as="script"><link rel="prefetch" href="/assets/day20-网络编程.html-06df787e.js" as="script"><link rel="prefetch" href="/assets/day21-注解和反射.html-53e281d7.js" as="script"><link rel="prefetch" href="/assets/day22-JDK8新特性1.html-73e1bd92.js" as="script"><link rel="prefetch" href="/assets/day22-JDK8新特性2.html-7b945c03.js" as="script"><link rel="prefetch" href="/assets/day23-JDK8-17新特性.html-14e90bcb.js" as="script"><link rel="prefetch" href="/assets/晨考题.html-a920b4c8.js" as="script"><link rel="prefetch" href="/assets/01_第一章 WEB开发概述.html-26089f90.js" as="script"><link rel="prefetch" href="/assets/02_第二章 HTML_CSS.html-c818b632.js" as="script"><link rel="prefetch" href="/assets/03_第三章 JavaScript.html-bfc72912.js" as="script"><link rel="prefetch" href="/assets/04_第四章 XML_Tomcat_HTTP.html-d7750d1a.js" as="script"><link rel="prefetch" href="/assets/05_第五章 Servlet.html-a7ea9037.js" as="script"><link rel="prefetch" href="/assets/06_第六章 会话_过滤器_监听器.html-4e70feed.js" as="script"><link rel="prefetch" href="/assets/07_第七章 前端工程化.html-6e6208af.js" as="script"><link rel="prefetch" href="/assets/08_第八章 微头条项目开发.html-c4a7847b.js" as="script"><link rel="prefetch" href="/assets/note01-mysql.html-a799c9e3.js" as="script"><link rel="prefetch" href="/assets/note02-JDBC.html-fc72c497.js" as="script"><link rel="prefetch" href="/assets/03-javascript.html-c569ab44.js" as="script"><link rel="prefetch" href="/assets/tomcat.html-1f41ceeb.js" as="script"><link rel="prefetch" href="/assets/Servlet.html-6da67955.js" as="script"><link rel="prefetch" href="/assets/06-请求响应.html-6cfbe496.js" as="script"><link rel="prefetch" href="/assets/07-会话控制1.html-c050f024.js" as="script"><link rel="prefetch" href="/assets/07-会话控制2.html-6809564a.js" as="script"><link rel="prefetch" href="/assets/08-前端工程化.html-c299db1c.js" as="script"><link rel="prefetch" href="/assets/vue01.html-1b5a29e0.js" as="script"><link rel="prefetch" href="/assets/vue02.html-d4b7237e.js" as="script"><link rel="prefetch" href="/assets/路由PiniaAjax.html-733cbb4d.js" as="script"><link rel="prefetch" href="/assets/基本CURD.html-b685fc41.js" as="script"><link rel="prefetch" href="/assets/微头条01.html-708a9edd.js" as="script"><link rel="prefetch" href="/assets/微头条02.html-014a39e2.js" as="script"><link rel="prefetch" href="/assets/day01课件.html-9f32a135.js" as="script"><link rel="prefetch" href="/assets/day02课件.html-15fef847.js" as="script"><link rel="prefetch" href="/assets/day03课件.html-23a90d5b.js" as="script"><link rel="prefetch" href="/assets/day04课件.html-7229c45c.js" as="script"><link rel="prefetch" href="/assets/day05课件.html-104d0769.js" as="script"><link rel="prefetch" href="/assets/day06课件.html-923ff723.js" as="script"><link rel="prefetch" href="/assets/day07课件.html-07e5061e.js" as="script"><link rel="prefetch" href="/assets/day08课件.html-e048c61c.js" as="script"><link rel="prefetch" href="/assets/day09课件.html-96ae8a34.js" as="script"><link rel="prefetch" href="/assets/day10课件.html-eb53fb4f.js" as="script"><link rel="prefetch" href="/assets/day11课件.html-60322589.js" as="script"><link rel="prefetch" href="/assets/day13课件.html-fcc3480d.js" as="script"><link rel="prefetch" href="/assets/day14课件.html-bd7eb6b2.js" as="script"><link rel="prefetch" href="/assets/day15课件.html-b4e1b366.js" as="script"><link rel="prefetch" href="/assets/day16课件.html-ad53a07e.js" as="script"><link rel="prefetch" href="/assets/day17课件.html-8aa27ef6.js" as="script"><link rel="prefetch" href="/assets/day18课件.html-3663bd2a.js" as="script"><link rel="prefetch" href="/assets/day19课件.html-fa7095b7.js" as="script"><link rel="prefetch" href="/assets/01_Maven依赖管理项目构建工具.html-fc1143af.js" as="script"><link rel="prefetch" href="/assets/02_Spring企业开发核心框架.html-b34d61ae.js" as="script"><link rel="prefetch" href="/assets/03_SpringMVC控制层框架.html-586715b5.js" as="script"><link rel="prefetch" href="/assets/04_MyBatis持久层框架.html-cc07e6b2.js" as="script"><link rel="prefetch" href="/assets/05_SSM整合实战.html-b0f640a4.js" as="script"><link rel="prefetch" href="/assets/SpringBoot.html-89205698.js" as="script"><link rel="prefetch" href="/assets/Linux.html-fa1c8247.js" as="script"><link rel="prefetch" href="/assets/Redis.html-bf2c2663.js" as="script"><link rel="prefetch" href="/assets/Git.html-68229a5c.js" as="script"><link rel="prefetch" href="/assets/Git补充.html-cfa36d44.js" as="script"><link rel="prefetch" href="/assets/微博客项目.html-13c2e896.js" as="script"><link rel="prefetch" href="/assets/JAVASE.html-e54fd3f0.js" as="script"><link rel="prefetch" href="/assets/集合类.html-c286edd4.js" as="script"><link rel="prefetch" href="/assets/MyBatis.html-8c237aeb.js" as="script"><link rel="prefetch" href="/assets/Spring、SpringMVC、SpringBoot.html-6526fc6f.js" as="script"><link rel="prefetch" href="/assets/SpringCloud.html-8e2d6ad0.js" as="script"><link rel="prefetch" href="/assets/JVM.html-053acc7f.js" as="script"><link rel="prefetch" href="/assets/JUC.html-9a7ec1c2.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-a03374a5.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-dc0f0e41.js" as="script"><link rel="prefetch" href="/assets/Redis.html-38205d4a.js" as="script"><link rel="prefetch" href="/assets/RabbitMQ.html-62429ec7.js" as="script"><link rel="prefetch" href="/assets/Cloud核心中间件.html-60ca6271.js" as="script"><link rel="prefetch" href="/assets/ElasticSearch.html-bcec7126.js" as="script"><link rel="prefetch" href="/assets/微服务、分布式.html-73b8bbdf.js" as="script"><link rel="prefetch" href="/assets/线程、并发.html-cb215269.js" as="script"><link rel="prefetch" href="/assets/场景题.html-d906fa5f.js" as="script"><link rel="prefetch" href="/assets/项目上线问题排查.html-baba1f1d.js" as="script"><link rel="prefetch" href="/assets/Netty.html-808e1fe2.js" as="script"><link rel="prefetch" href="/assets/Tomcat.html-2e454008.js" as="script"><link rel="prefetch" href="/assets/计算机网络.html-f7e96712.js" as="script"><link rel="prefetch" href="/assets/云计算.html-96cb414a.js" as="script"><link rel="prefetch" href="/assets/404.html-35013f6f.js" as="script"><link rel="prefetch" href="/assets/SearchResult-8164bd28.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/logo.png" alt="老嗨学Java"><span class="site-name can-hide">老嗨学Java</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java_se/00-晨考题/JAVASE晨考题.md" class="" aria-label="00-JavaSE晨考题"><!--[--><!--]--> 00-JavaSE晨考题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day01-笔记/day01 Java语言概述.md" class="" aria-label="day01-Java语言概述"><!--[--><!--]--> day01-Java语言概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day02-笔记/day02 变量和数据类型.md" class="" aria-label="day02-变量和数据类型"><!--[--><!--]--> day02-变量和数据类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day03-笔记/day03 变量和数据类型.md" class="" aria-label="day03-变量和数据类型"><!--[--><!--]--> day03-变量和数据类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day04-笔记/day04 分支结构和循环结构.md" class="" aria-label="day04-分支结构和循环结构"><!--[--><!--]--> day04-分支结构和循环结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day05-笔记/day05 循环结构.md" class="" aria-label="day05-循环结构"><!--[--><!--]--> day05-循环结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day06-笔记/day06-方法和数组.md" class="" aria-label="day06-方法和数组"><!--[--><!--]--> day06-方法和数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day07-笔记/day07-数组和排序.md" class="" aria-label="day07-数组和排序"><!--[--><!--]--> day07-数组和排序 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day08-笔记/day08-初识面向对象.md" class="" aria-label="day08-初识面向对象"><!--[--><!--]--> day08-初识面向对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day09-笔记/day09-封装和继承.md" class="" aria-label="day09-封装和继承"><!--[--><!--]--> day09-封装和继承 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day10-笔记/day10-方法重写和多态.md" class="" aria-label="day10-方法重写和多态"><!--[--><!--]--> day10-方法重写和多态 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day11-笔记/day11-方法重写和多态.md" class="" aria-label="day11-方法重写和多态"><!--[--><!--]--> day11-方法重写和多态 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day12-笔记/day12-多态和抽象类.md" class="" aria-label="day12-多态和抽象类"><!--[--><!--]--> day12-多态和抽象类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day13-笔记/day13-接口与异常.md" class="" aria-label="day13-接口与异常"><!--[--><!--]--> day13-接口与异常 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day14-笔记/day14-常用类API.md" class="" aria-label="day14-常用类API"><!--[--><!--]--> day14-常用类API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day16-笔记/day16-常用类与集合.md" class="" aria-label="day16-常用类与集合"><!--[--><!--]--> day16-常用类与集合 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day17-笔记/day17-IO.md" class="" aria-label="day17-IO"><!--[--><!--]--> day17-IO <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day19-笔记/day19-多线程.md" class="" aria-label="day19-多线程"><!--[--><!--]--> day19-多线程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day20-笔记/day20-网络编程.md" class="" aria-label="day20-网络编程"><!--[--><!--]--> day20-网络编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day21-笔记/day21-注解和反射.md" class="" aria-label="day21-注解和反射"><!--[--><!--]--> day21-注解和反射 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day22-笔记/day22-JDK8新特性1.md" class="" aria-label="day22-JDK8新特性1"><!--[--><!--]--> day22-JDK8新特性1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day22-笔记/day22-JDK8新特性2.md" class="" aria-label="day22-JDK8新特性2"><!--[--><!--]--> day22-JDK8新特性2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day23-笔记/day23-JDK8-17新特性.md" class="" aria-label="day23-JDK8-17新特性"><!--[--><!--]--> day23-JDK8-17新特性 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java_web/00-晨考题/晨考题.md" class="" aria-label="00.晨考题"><!--[--><!--]--> 00.晨考题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/01-mysql/note01-mysql.md" class="" aria-label="01.MySQL"><!--[--><!--]--> 01.MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/02-jdbc/note02-JDBC.md" class="" aria-label="02.JDBC"><!--[--><!--]--> 02.JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/03-js/03-javascript.md" class="" aria-label="03.JavaScript"><!--[--><!--]--> 03.JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/04-tomcat/tomcat.md" class="" aria-label="04.tomcat"><!--[--><!--]--> 04.tomcat <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/05-servlet/Servlet.md" class="" aria-label="05.Servlet"><!--[--><!--]--> 05.Servlet <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/06-请求响应/06-请求响应.md" class="" aria-label="06.请求响应"><!--[--><!--]--> 06.请求响应 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/07-会话控制/07-会话控制1.md" class="" aria-label="07.会话控制1"><!--[--><!--]--> 07.会话控制1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/07-会话控制/07-会话控制2.md" class="" aria-label="07.会话控制2"><!--[--><!--]--> 07.会话控制2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/08-前端工程化/08-前端工程化.md" class="" aria-label="08.前端工程化"><!--[--><!--]--> 08.前端工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/09-vue01/vue01.md" class="" aria-label="09.vue01"><!--[--><!--]--> 09.vue01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/10-vue02/vue02.md" class="" aria-label="10.vue02"><!--[--><!--]--> 10.vue02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/11-路由PiniaAjax/路由PiniaAjax.md" class="" aria-label="11.路由PiniaAjax"><!--[--><!--]--> 11.路由PiniaAjax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/12-基本CURD/基本CURD.md" class="" aria-label="12.基本CURD"><!--[--><!--]--> 12.基本CURD <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/13-微头条01/微头条01.md" class="" aria-label="13.微头条01"><!--[--><!--]--> 13.微头条01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/14-微头条02/微头条02.md" class="" aria-label="14.微头条02"><!--[--><!--]--> 14.微头条02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>资料</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/01_第一章 WEB开发概述.md" class="" aria-label="第一章 WEB开发概述"><!--[--><!--]--> 第一章 WEB开发概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/02_第二章 HTML&amp;CSS.md" class="" aria-label="第二章 HTML&amp;CSS"><!--[--><!--]--> 第二章 HTML&amp;CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/03_第三章 JavaScript.md" class="" aria-label="第三章 JavaScript"><!--[--><!--]--> 第三章 JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/04_第四章 XML_Tomcat_HTTP.md" class="" aria-label="第四章 XML_Tomcat_HTTP"><!--[--><!--]--> 第四章 XML_Tomcat_HTTP <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/05_第五章 Servlet.md" class="" aria-label="第五章 Servlet"><!--[--><!--]--> 第五章 Servlet <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/06_第六章 会话_过滤器_监听器.md" class="" aria-label="第六章 会话_过滤器_监听器"><!--[--><!--]--> 第六章 会话_过滤器_监听器 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/07_第七章 前端工程化.md" class="" aria-label="第七章 前端工程化"><!--[--><!--]--> 第七章 前端工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/08_第八章 微头条项目开发.md" class="" aria-label="第八章 微头条项目开发"><!--[--><!--]--> 第八章 微头条项目开发 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="SSM"><span class="title">SSM</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="SSM"><span class="title">SSM</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ssm/01_Maven/01_Maven依赖管理项目构建工具.md" class="" aria-label="01.Maven"><!--[--><!--]--> 01.Maven <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/02_Spring/02_Spring企业开发核心框架.md" class="" aria-label="02.Spring"><!--[--><!--]--> 02.Spring <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/03_SpringMVC/03_SpringMVC控制层框架.md" class="" aria-label="03.SpringMVC"><!--[--><!--]--> 03.SpringMVC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/04_MyBatis/04_MyBatis持久层框架.md" class="" aria-label="04.MyBatis"><!--[--><!--]--> 04.MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/05_SSM/05_SSM整合实战.md" class="" aria-label="05.SSM整合实战"><!--[--><!--]--> 05.SSM整合实战 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/06_SpringBoot/SpringBoot.md" class="" aria-label="06.SpringBoot"><!--[--><!--]--> 06.SpringBoot <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/07_Linux/Linux.md" class="" aria-label="07.Linux"><!--[--><!--]--> 07.Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/08_Redis/Redis.md" class="" aria-label="08.Redis"><!--[--><!--]--> 08.Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/09_Git/Git.md" class="" aria-label="09.Git"><!--[--><!--]--> 09.Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/10_Git补充/Git补充.md" class="" aria-label="10.Git补充"><!--[--><!--]--> 10.Git补充 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/11_微博客项目/微博客项目.md" class="" aria-label="11.微博客项目"><!--[--><!--]--> 11.微博客项目 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="尚品甄选"><span class="title">尚品甄选</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="尚品甄选"><span class="title">尚品甄选</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/spzx/day01/day01课件.md" class="" aria-label="day01课件"><!--[--><!--]--> day01课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day02/day02课件.md" class="" aria-label="day02课件"><!--[--><!--]--> day02课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day03/day03课件.md" class="" aria-label="day03课件"><!--[--><!--]--> day03课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day04/day04课件.md" class="" aria-label="day04课件"><!--[--><!--]--> day04课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day05/day05课件.md" class="" aria-label="day05课件"><!--[--><!--]--> day05课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day06/day06课件.md" class="" aria-label="day06课件"><!--[--><!--]--> day06课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day07/day07课件.md" class="" aria-label="day07课件"><!--[--><!--]--> day07课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day08/day08课件.md" class="" aria-label="day08课件"><!--[--><!--]--> day08课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day09/day09课件.md" class="" aria-label="day09课件"><!--[--><!--]--> day09课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day10/day10课件.md" class="" aria-label="day10课件"><!--[--><!--]--> day10课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day11/day11课件.md" class="" aria-label="day11课件"><!--[--><!--]--> day11课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day12/day12课件.md" class="" aria-label="day12课件"><!--[--><!--]--> day12课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day13/day13课件.md" class="" aria-label="day13课件"><!--[--><!--]--> day13课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day14/day14课件.md" class="" aria-label="day14课件"><!--[--><!--]--> day14课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day15/day15课件.md" class="" aria-label="day15课件"><!--[--><!--]--> day15课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day16/day16课件.md" class="" aria-label="day16课件"><!--[--><!--]--> day16课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day17/day17课件.md" class="" aria-label="day17课件"><!--[--><!--]--> day17课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day18/day18课件.md" class="" aria-label="day18课件"><!--[--><!--]--> day18课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day19/day19课件.md" class="" aria-label="day19课件"><!--[--><!--]--> day19课件 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java高级"><span class="title">Java高级</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java高级"><span class="title">Java高级</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JVM</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/01-JVM-概述.md" class="" aria-label="01.JVM-概述"><!--[--><!--]--> 01.JVM-概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/02-JVM-类加载机制.md" class="" aria-label="02.JVM-类加载机制"><!--[--><!--]--> 02.JVM-类加载机制 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/03-JVM-不重要部分.md" class="" aria-label="03.JVM-不重要部分"><!--[--><!--]--> 03.JVM-不重要部分 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/04-JVM-执行引擎.md" class="" aria-label="04.JVM-执行引擎"><!--[--><!--]--> 04.JVM-执行引擎 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/05-JVM-方法区.md" class="" aria-label="05.JVM-方法区"><!--[--><!--]--> 05.JVM-方法区 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/06-JVM-Java栈.md" class="" aria-label="06.JVM-Java栈"><!--[--><!--]--> 06.JVM-Java栈 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/07-JVM-堆.md" class="" aria-label="07.JVM-堆"><!--[--><!--]--> 07.JVM-堆 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/08-JVM-GC.md" class="" aria-label="08.JVM-GC"><!--[--><!--]--> 08.JVM-GC <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JUC</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/01-多线程回顾.md" class="" aria-label="01.多线程回顾"><!--[--><!--]--> 01.多线程回顾 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/02-synchronized.md" class="" aria-label="02.synchronized"><!--[--><!--]--> 02.synchronized <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/03-Lock操作.md" class="" aria-label="03.Lock操作"><!--[--><!--]--> 03.Lock操作 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/04-Lock原理.md" class="" aria-label="04.Lock原理"><!--[--><!--]--> 04.Lock原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/05-集合.md" class="" aria-label="05.集合"><!--[--><!--]--> 05.集合 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/06-ThreadPool.md" class="" aria-label="06.ThreadPool"><!--[--><!--]--> 06.ThreadPool <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/07-CompletableFuture.md" class="" aria-label="07.CompletableFuture"><!--[--><!--]--> 07.CompletableFuture <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="MySQL"><span class="title">MySQL</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="MySQL"><span class="title">MySQL</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/mysql/MySQL01-安装.md" class="" aria-label="MySQL01-安装"><!--[--><!--]--> MySQL01-安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL02-逻辑架构.md" class="" aria-label="MySQL02-逻辑架构"><!--[--><!--]--> MySQL02-逻辑架构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL03-索引-主键索引.md" class="" aria-label="MySQL03-索引-主键索引"><!--[--><!--]--> MySQL03-索引-主键索引 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL04-索引-非主键索引.md" class="" aria-label="MySQL04-索引-非主键索引"><!--[--><!--]--> MySQL04-索引-非主键索引 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL05-优化-Explain分析.md" class="" aria-label="MySQL05-优化-Explain分析"><!--[--><!--]--> MySQL05-优化-Explain分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL06-优化-索引失效.md" class="" aria-label="MySQL06-优化-索引失效"><!--[--><!--]--> MySQL06-优化-索引失效 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL07-优化-专题.md" class="" aria-label="MySQL07-优化-专题"><!--[--><!--]--> MySQL07-优化-专题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL08-优化-索引总结.md" class="" aria-label="MySQL08-优化-索引总结"><!--[--><!--]--> MySQL08-优化-索引总结 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL09-日志-基础日志.md" class="" aria-label="MySQL09-日志-基础日志"><!--[--><!--]--> MySQL09-日志-基础日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL10-日志-事务日志.md" class="" aria-label="MySQL10-日志-事务日志"><!--[--><!--]--> MySQL10-日志-事务日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL11-锁-概述.md" class="" aria-label="MySQL11-锁-概述"><!--[--><!--]--> MySQL11-锁-概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL12-锁-MyISAM表锁.md" class="" aria-label="MySQL12-锁-MyISAM表锁"><!--[--><!--]--> MySQL12-锁-MyISAM表锁 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL13-锁-InnoDB行锁.md" class="" aria-label="MySQL13-锁-InnoDB行锁"><!--[--><!--]--> MySQL13-锁-InnoDB行锁 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL14-MVCC-快照读和当前读.md" class="" aria-label="MySQL14-MVCC-快照读和当前读"><!--[--><!--]--> MySQL14-MVCC-快照读和当前读 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL15-MVCC-隐藏字段以及Undo Log版本链.md" class="" aria-label="MySQL15-MVCC-隐藏字段以及Undo Log版本链"><!--[--><!--]--> MySQL15-MVCC-隐藏字段以及Undo Log版本链 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL16-MVCC-ReadView.md" class="" aria-label="MySQL16-MVCC-ReadView"><!--[--><!--]--> MySQL16-MVCC-ReadView <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL17-ShardingSphere.md" class="" aria-label="MySQL17-ShardingSphere"><!--[--><!--]--> MySQL17-ShardingSphere <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="云上实战"><span class="title">云上实战</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="云上实战"><span class="title">云上实战</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cloud/0、消息队列-Kafka.md" class="" aria-label="0、消息队列-Kafka"><!--[--><!--]--> 0、消息队列-Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/cloud/1、架构师核心-云计算基础.md" class="" aria-label="1、架构师核心-云计算基础"><!--[--><!--]--> 1、架构师核心-云计算基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/cloud/2、架构师核心-云上演练场.md" class="" aria-label="2、架构师核心-云上演练场"><!--[--><!--]--> 2、架构师核心-云上演练场 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/cloud/3、附录：中间件与环境安装文档.md" class="" aria-label="3、附录：中间件与环境安装文档"><!--[--><!--]--> 3、附录：中间件与环境安装文档 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/datastructure/ds.md" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="谷粒随享"><span class="title">谷粒随享</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="谷粒随享"><span class="title">谷粒随享</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tingshu/00-环境安装.md" class="" aria-label="00-环境安装"><!--[--><!--]--> 00-环境安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/01-前端部署.md" class="" aria-label="01-前端部署"><!--[--><!--]--> 01-前端部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/02-ElasticSearch入门.md" class="" aria-label="02-ElasticSearch入门"><!--[--><!--]--> 02-ElasticSearch入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/03-MongoDB入门.md" class="" aria-label="03-MongoDB入门"><!--[--><!--]--> 03-MongoDB入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第1章 专辑管理.md" class="" aria-label="第1章 专辑管理"><!--[--><!--]--> 第1章 专辑管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第2章 声音管理.md" class="" aria-label="第2章 声音管理"><!--[--><!--]--> 第2章 声音管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第3章 用户登录.md" class="" aria-label="第3章 用户登录"><!--[--><!--]--> 第3章 用户登录 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第4章 检索模块.md" class="" aria-label="第4章 检索模块"><!--[--><!--]--> 第4章 检索模块 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第5章 详情介绍.md" class="" aria-label="第5章 详情介绍"><!--[--><!--]--> 第5章 详情介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第6章 详情优化.md" class="" aria-label="第6章 详情优化"><!--[--><!--]--> 第6章 详情优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第7章 订单.md" class="" aria-label="第7章 订单"><!--[--><!--]--> 第7章 订单 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第8章 支付.md" class="" aria-label="第8章 支付"><!--[--><!--]--> 第8章 支付 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第9章 分布式任务调度.md" class="" aria-label="第9章 分布式任务调度"><!--[--><!--]--> 第9章 分布式任务调度 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第10章 直播.md" class="" aria-label="第10章 直播"><!--[--><!--]--> 第10章 直播 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试专题01"><span class="title">面试专题01</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试专题01"><span class="title">面试专题01</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/interview/00.高频面试题/高频面试题.md" class="" aria-label="高频面试题"><!--[--><!--]--> 高频面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/01.Java基础/01.JAVASE/JAVASE.md" class="" aria-label="Java基础"><!--[--><!--]--> Java基础 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/01.Java基础/01.JAVASE/JAVASE.md" class="" aria-label="01.JAVASE"><!--[--><!--]--> 01.JAVASE <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/01.Java基础/02.集合类/集合类.md" class="" aria-label="02.集合类"><!--[--><!--]--> 02.集合类 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/02.Java框架/01.MyBatis/MyBatis.md" class="" aria-label="Java框架"><!--[--><!--]--> Java框架 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/02.Java框架/01.MyBatis/MyBatis.md" class="" aria-label="01.MyBatis"><!--[--><!--]--> 01.MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/02.Java框架/02.Spring、SpringMVC、SpringBoot/Spring、SpringMVC、SpringBoot.md" class="" aria-label="02.Spring、SpringMVC、SpringBoot"><!--[--><!--]--> 02.Spring、SpringMVC、SpringBoot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/02.Java框架/03.SpringCloud/SpringCloud.md" class="" aria-label="03.SpringCloud"><!--[--><!--]--> 03.SpringCloud <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/03.Java高级/01.JVM/JVM.md" class="" aria-label="Java高级"><!--[--><!--]--> Java高级 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/03.Java高级/01.JVM/JVM.md" class="" aria-label="01.JVM"><!--[--><!--]--> 01.JVM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/03.Java高级/02.JUC/JUC.md" class="" aria-label="02.JUC"><!--[--><!--]--> 02.JUC <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/线程、并发/线程、并发.md" class="" aria-label="04.线程、并发"><!--[--><!--]--> 04.线程、并发 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/03.Java高级/03.设计模式/设计模式.md" class="" aria-label="05.设计模式"><!--[--><!--]--> 05.设计模式 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/07.分布式/微服务、分布式/微服务、分布式.md" class="" aria-label="分布式"><!--[--><!--]--> 分布式 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/微服务、分布式/微服务、分布式.md" class="" aria-label="01.微服务、分布式"><!--[--><!--]--> 01.微服务、分布式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/Cloud核心中间件/Cloud核心中间件.md" class="" aria-label="02.Cloud核心中间件"><!--[--><!--]--> 02.Cloud核心中间件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试专题02"><span class="title">面试专题02</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试专题02"><span class="title">面试专题02</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/04.数据库/MySQL/MySQL.md" class="" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/04.数据库/MySQL/MySQL.md" class="" aria-label="01.MYSQL"><!--[--><!--]--> 01.MYSQL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/05.缓存/Redis/Redis.md" class="" aria-label="02.Redis"><!--[--><!--]--> 02.Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/06.消息队列/RabbitMQ/RabbitMQ.md" class="" aria-label="03.消息队列"><!--[--><!--]--> 03.消息队列 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/ElasticSearch/ElasticSearch.md" class="" aria-label="04.ElasticSearch"><!--[--><!--]--> 04.ElasticSearch <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/08.场景题/场景题/场景题.md" class="" aria-label="场景题"><!--[--><!--]--> 场景题 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/08.场景题/场景题/场景题.md" class="" aria-label="01.场景题"><!--[--><!--]--> 01.场景题 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/08.场景题/项目上线问题排查/项目上线问题排查.md" class="" aria-label="02.项目上线问题排查"><!--[--><!--]--> 02.项目上线问题排查 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/09.人事面试/人事面试.md" class="" aria-label="03.人事面试"><!--[--><!--]--> 03.人事面试 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/10.网络/计算机网络/计算机网络.md" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/10.网络/计算机网络/计算机网络.md" class="" aria-label="01.计算机网络"><!--[--><!--]--> 01.计算机网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/10.网络/Netty/Netty.md" class="" aria-label="02.Netty"><!--[--><!--]--> 02.Netty <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/10.网络/Tomcat/Tomcat.md" class="" aria-label="03.Tomcat"><!--[--><!--]--> 03.Tomcat <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/11.热门领域概念/云计算/云计算.md" class="" aria-label="04.云计算"><!--[--><!--]--> 04.云计算 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/laohix/laohix.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaSE"><span class="title">JavaSE</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java_se/00-晨考题/JAVASE晨考题.md" class="" aria-label="00-JavaSE晨考题"><!--[--><!--]--> 00-JavaSE晨考题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day01-笔记/day01 Java语言概述.md" class="" aria-label="day01-Java语言概述"><!--[--><!--]--> day01-Java语言概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day02-笔记/day02 变量和数据类型.md" class="" aria-label="day02-变量和数据类型"><!--[--><!--]--> day02-变量和数据类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day03-笔记/day03 变量和数据类型.md" class="" aria-label="day03-变量和数据类型"><!--[--><!--]--> day03-变量和数据类型 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day04-笔记/day04 分支结构和循环结构.md" class="" aria-label="day04-分支结构和循环结构"><!--[--><!--]--> day04-分支结构和循环结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day05-笔记/day05 循环结构.md" class="" aria-label="day05-循环结构"><!--[--><!--]--> day05-循环结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day06-笔记/day06-方法和数组.md" class="" aria-label="day06-方法和数组"><!--[--><!--]--> day06-方法和数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day07-笔记/day07-数组和排序.md" class="" aria-label="day07-数组和排序"><!--[--><!--]--> day07-数组和排序 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day08-笔记/day08-初识面向对象.md" class="" aria-label="day08-初识面向对象"><!--[--><!--]--> day08-初识面向对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day09-笔记/day09-封装和继承.md" class="" aria-label="day09-封装和继承"><!--[--><!--]--> day09-封装和继承 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day10-笔记/day10-方法重写和多态.md" class="" aria-label="day10-方法重写和多态"><!--[--><!--]--> day10-方法重写和多态 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day11-笔记/day11-方法重写和多态.md" class="" aria-label="day11-方法重写和多态"><!--[--><!--]--> day11-方法重写和多态 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day12-笔记/day12-多态和抽象类.md" class="" aria-label="day12-多态和抽象类"><!--[--><!--]--> day12-多态和抽象类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day13-笔记/day13-接口与异常.md" class="" aria-label="day13-接口与异常"><!--[--><!--]--> day13-接口与异常 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day14-笔记/day14-常用类API.md" class="" aria-label="day14-常用类API"><!--[--><!--]--> day14-常用类API <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day16-笔记/day16-常用类与集合.md" class="" aria-label="day16-常用类与集合"><!--[--><!--]--> day16-常用类与集合 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day17-笔记/day17-IO.md" class="" aria-label="day17-IO"><!--[--><!--]--> day17-IO <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day19-笔记/day19-多线程.md" class="" aria-label="day19-多线程"><!--[--><!--]--> day19-多线程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day20-笔记/day20-网络编程.md" class="" aria-label="day20-网络编程"><!--[--><!--]--> day20-网络编程 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day21-笔记/day21-注解和反射.md" class="" aria-label="day21-注解和反射"><!--[--><!--]--> day21-注解和反射 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day22-笔记/day22-JDK8新特性1.md" class="" aria-label="day22-JDK8新特性1"><!--[--><!--]--> day22-JDK8新特性1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day22-笔记/day22-JDK8新特性2.md" class="" aria-label="day22-JDK8新特性2"><!--[--><!--]--> day22-JDK8新特性2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_se/day23-笔记/day23-JDK8-17新特性.md" class="" aria-label="day23-JDK8-17新特性"><!--[--><!--]--> day23-JDK8-17新特性 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JavaWeb"><span class="title">JavaWeb</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/java_web/00-晨考题/晨考题.md" class="" aria-label="00.晨考题"><!--[--><!--]--> 00.晨考题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/01-mysql/note01-mysql.md" class="" aria-label="01.MySQL"><!--[--><!--]--> 01.MySQL <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/02-jdbc/note02-JDBC.md" class="" aria-label="02.JDBC"><!--[--><!--]--> 02.JDBC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/03-js/03-javascript.md" class="" aria-label="03.JavaScript"><!--[--><!--]--> 03.JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/04-tomcat/tomcat.md" class="" aria-label="04.tomcat"><!--[--><!--]--> 04.tomcat <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/05-servlet/Servlet.md" class="" aria-label="05.Servlet"><!--[--><!--]--> 05.Servlet <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/06-请求响应/06-请求响应.md" class="" aria-label="06.请求响应"><!--[--><!--]--> 06.请求响应 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/07-会话控制/07-会话控制1.md" class="" aria-label="07.会话控制1"><!--[--><!--]--> 07.会话控制1 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/07-会话控制/07-会话控制2.md" class="" aria-label="07.会话控制2"><!--[--><!--]--> 07.会话控制2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/08-前端工程化/08-前端工程化.md" class="" aria-label="08.前端工程化"><!--[--><!--]--> 08.前端工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/09-vue01/vue01.md" class="" aria-label="09.vue01"><!--[--><!--]--> 09.vue01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/10-vue02/vue02.md" class="" aria-label="10.vue02"><!--[--><!--]--> 10.vue02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/11-路由PiniaAjax/路由PiniaAjax.md" class="" aria-label="11.路由PiniaAjax"><!--[--><!--]--> 11.路由PiniaAjax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/12-基本CURD/基本CURD.md" class="" aria-label="12.基本CURD"><!--[--><!--]--> 12.基本CURD <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/13-微头条01/微头条01.md" class="" aria-label="13.微头条01"><!--[--><!--]--> 13.微头条01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/java_web/14-微头条02/微头条02.md" class="" aria-label="14.微头条02"><!--[--><!--]--> 14.微头条02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>资料</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/01_第一章 WEB开发概述.md" class="" aria-label="第一章 WEB开发概述"><!--[--><!--]--> 第一章 WEB开发概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/02_第二章 HTML&amp;CSS.md" class="" aria-label="第二章 HTML&amp;CSS"><!--[--><!--]--> 第二章 HTML&amp;CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/03_第三章 JavaScript.md" class="" aria-label="第三章 JavaScript"><!--[--><!--]--> 第三章 JavaScript <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/04_第四章 XML_Tomcat_HTTP.md" class="" aria-label="第四章 XML_Tomcat_HTTP"><!--[--><!--]--> 第四章 XML_Tomcat_HTTP <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/05_第五章 Servlet.md" class="" aria-label="第五章 Servlet"><!--[--><!--]--> 第五章 Servlet <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/06_第六章 会话_过滤器_监听器.md" class="" aria-label="第六章 会话_过滤器_监听器"><!--[--><!--]--> 第六章 会话_过滤器_监听器 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/07_第七章 前端工程化.md" class="" aria-label="第七章 前端工程化"><!--[--><!--]--> 第七章 前端工程化 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_web/00-资料/08_第八章 微头条项目开发.md" class="" aria-label="第八章 微头条项目开发"><!--[--><!--]--> 第八章 微头条项目开发 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="SSM"><span class="title">SSM</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="SSM"><span class="title">SSM</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/ssm/01_Maven/01_Maven依赖管理项目构建工具.md" class="" aria-label="01.Maven"><!--[--><!--]--> 01.Maven <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/02_Spring/02_Spring企业开发核心框架.md" class="" aria-label="02.Spring"><!--[--><!--]--> 02.Spring <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/03_SpringMVC/03_SpringMVC控制层框架.md" class="" aria-label="03.SpringMVC"><!--[--><!--]--> 03.SpringMVC <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/04_MyBatis/04_MyBatis持久层框架.md" class="" aria-label="04.MyBatis"><!--[--><!--]--> 04.MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/05_SSM/05_SSM整合实战.md" class="" aria-label="05.SSM整合实战"><!--[--><!--]--> 05.SSM整合实战 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/06_SpringBoot/SpringBoot.md" class="" aria-label="06.SpringBoot"><!--[--><!--]--> 06.SpringBoot <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/07_Linux/Linux.md" class="" aria-label="07.Linux"><!--[--><!--]--> 07.Linux <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/08_Redis/Redis.md" class="" aria-label="08.Redis"><!--[--><!--]--> 08.Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/09_Git/Git.md" class="" aria-label="09.Git"><!--[--><!--]--> 09.Git <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/10_Git补充/Git补充.md" class="" aria-label="10.Git补充"><!--[--><!--]--> 10.Git补充 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/ssm/11_微博客项目/微博客项目.md" class="" aria-label="11.微博客项目"><!--[--><!--]--> 11.微博客项目 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="尚品甄选"><span class="title">尚品甄选</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="尚品甄选"><span class="title">尚品甄选</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/spzx/day01/day01课件.md" class="" aria-label="day01课件"><!--[--><!--]--> day01课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day02/day02课件.md" class="" aria-label="day02课件"><!--[--><!--]--> day02课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day03/day03课件.md" class="" aria-label="day03课件"><!--[--><!--]--> day03课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day04/day04课件.md" class="" aria-label="day04课件"><!--[--><!--]--> day04课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day05/day05课件.md" class="" aria-label="day05课件"><!--[--><!--]--> day05课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day06/day06课件.md" class="" aria-label="day06课件"><!--[--><!--]--> day06课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day07/day07课件.md" class="" aria-label="day07课件"><!--[--><!--]--> day07课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day08/day08课件.md" class="" aria-label="day08课件"><!--[--><!--]--> day08课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day09/day09课件.md" class="" aria-label="day09课件"><!--[--><!--]--> day09课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day10/day10课件.md" class="" aria-label="day10课件"><!--[--><!--]--> day10课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day11/day11课件.md" class="" aria-label="day11课件"><!--[--><!--]--> day11课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day12/day12课件.md" class="" aria-label="day12课件"><!--[--><!--]--> day12课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day13/day13课件.md" class="" aria-label="day13课件"><!--[--><!--]--> day13课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day14/day14课件.md" class="" aria-label="day14课件"><!--[--><!--]--> day14课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day15/day15课件.md" class="" aria-label="day15课件"><!--[--><!--]--> day15课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day16/day16课件.md" class="" aria-label="day16课件"><!--[--><!--]--> day16课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day17/day17课件.md" class="" aria-label="day17课件"><!--[--><!--]--> day17课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day18/day18课件.md" class="" aria-label="day18课件"><!--[--><!--]--> day18课件 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spzx/day19/day19课件.md" class="" aria-label="day19课件"><!--[--><!--]--> day19课件 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Java高级"><span class="title">Java高级</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Java高级"><span class="title">Java高级</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JVM</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/01-JVM-概述.md" class="" aria-label="01.JVM-概述"><!--[--><!--]--> 01.JVM-概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/02-JVM-类加载机制.md" class="" aria-label="02.JVM-类加载机制"><!--[--><!--]--> 02.JVM-类加载机制 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/03-JVM-不重要部分.md" class="" aria-label="03.JVM-不重要部分"><!--[--><!--]--> 03.JVM-不重要部分 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/04-JVM-执行引擎.md" class="" aria-label="04.JVM-执行引擎"><!--[--><!--]--> 04.JVM-执行引擎 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/05-JVM-方法区.md" class="" aria-label="05.JVM-方法区"><!--[--><!--]--> 05.JVM-方法区 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/06-JVM-Java栈.md" class="" aria-label="06.JVM-Java栈"><!--[--><!--]--> 06.JVM-Java栈 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/07-JVM-堆.md" class="" aria-label="07.JVM-堆"><!--[--><!--]--> 07.JVM-堆 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/jvm/08-JVM-GC.md" class="" aria-label="08.JVM-GC"><!--[--><!--]--> 08.JVM-GC <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>JUC</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/01-多线程回顾.md" class="" aria-label="01.多线程回顾"><!--[--><!--]--> 01.多线程回顾 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/02-synchronized.md" class="" aria-label="02.synchronized"><!--[--><!--]--> 02.synchronized <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/03-Lock操作.md" class="" aria-label="03.Lock操作"><!--[--><!--]--> 03.Lock操作 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/04-Lock原理.md" class="" aria-label="04.Lock原理"><!--[--><!--]--> 04.Lock原理 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/05-集合.md" class="" aria-label="05.集合"><!--[--><!--]--> 05.集合 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/06-ThreadPool.md" class="" aria-label="06.ThreadPool"><!--[--><!--]--> 06.ThreadPool <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/java_adv/juc/07-CompletableFuture.md" class="" aria-label="07.CompletableFuture"><!--[--><!--]--> 07.CompletableFuture <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="MySQL"><span class="title">MySQL</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="MySQL"><span class="title">MySQL</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/mysql/MySQL01-安装.md" class="" aria-label="MySQL01-安装"><!--[--><!--]--> MySQL01-安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL02-逻辑架构.md" class="" aria-label="MySQL02-逻辑架构"><!--[--><!--]--> MySQL02-逻辑架构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL03-索引-主键索引.md" class="" aria-label="MySQL03-索引-主键索引"><!--[--><!--]--> MySQL03-索引-主键索引 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL04-索引-非主键索引.md" class="" aria-label="MySQL04-索引-非主键索引"><!--[--><!--]--> MySQL04-索引-非主键索引 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL05-优化-Explain分析.md" class="" aria-label="MySQL05-优化-Explain分析"><!--[--><!--]--> MySQL05-优化-Explain分析 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL06-优化-索引失效.md" class="" aria-label="MySQL06-优化-索引失效"><!--[--><!--]--> MySQL06-优化-索引失效 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL07-优化-专题.md" class="" aria-label="MySQL07-优化-专题"><!--[--><!--]--> MySQL07-优化-专题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL08-优化-索引总结.md" class="" aria-label="MySQL08-优化-索引总结"><!--[--><!--]--> MySQL08-优化-索引总结 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL09-日志-基础日志.md" class="" aria-label="MySQL09-日志-基础日志"><!--[--><!--]--> MySQL09-日志-基础日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL10-日志-事务日志.md" class="" aria-label="MySQL10-日志-事务日志"><!--[--><!--]--> MySQL10-日志-事务日志 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL11-锁-概述.md" class="" aria-label="MySQL11-锁-概述"><!--[--><!--]--> MySQL11-锁-概述 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL12-锁-MyISAM表锁.md" class="" aria-label="MySQL12-锁-MyISAM表锁"><!--[--><!--]--> MySQL12-锁-MyISAM表锁 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL13-锁-InnoDB行锁.md" class="" aria-label="MySQL13-锁-InnoDB行锁"><!--[--><!--]--> MySQL13-锁-InnoDB行锁 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL14-MVCC-快照读和当前读.md" class="" aria-label="MySQL14-MVCC-快照读和当前读"><!--[--><!--]--> MySQL14-MVCC-快照读和当前读 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL15-MVCC-隐藏字段以及Undo Log版本链.md" class="" aria-label="MySQL15-MVCC-隐藏字段以及Undo Log版本链"><!--[--><!--]--> MySQL15-MVCC-隐藏字段以及Undo Log版本链 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL16-MVCC-ReadView.md" class="" aria-label="MySQL16-MVCC-ReadView"><!--[--><!--]--> MySQL16-MVCC-ReadView <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/mysql/MySQL17-ShardingSphere.md" class="" aria-label="MySQL17-ShardingSphere"><!--[--><!--]--> MySQL17-ShardingSphere <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="云上实战"><span class="title">云上实战</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="云上实战"><span class="title">云上实战</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/cloud/0、消息队列-Kafka.md" class="" aria-label="0、消息队列-Kafka"><!--[--><!--]--> 0、消息队列-Kafka <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/cloud/1、架构师核心-云计算基础.md" class="" aria-label="1、架构师核心-云计算基础"><!--[--><!--]--> 1、架构师核心-云计算基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/cloud/2、架构师核心-云上演练场.md" class="" aria-label="2、架构师核心-云上演练场"><!--[--><!--]--> 2、架构师核心-云上演练场 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/cloud/3、附录：中间件与环境安装文档.md" class="" aria-label="3、附录：中间件与环境安装文档"><!--[--><!--]--> 3、附录：中间件与环境安装文档 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/datastructure/ds.md" class="" aria-label="数据结构"><!--[--><!--]--> 数据结构 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="谷粒随享"><span class="title">谷粒随享</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="谷粒随享"><span class="title">谷粒随享</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/tingshu/00-环境安装.md" class="" aria-label="00-环境安装"><!--[--><!--]--> 00-环境安装 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/01-前端部署.md" class="" aria-label="01-前端部署"><!--[--><!--]--> 01-前端部署 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/02-ElasticSearch入门.md" class="" aria-label="02-ElasticSearch入门"><!--[--><!--]--> 02-ElasticSearch入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/03-MongoDB入门.md" class="" aria-label="03-MongoDB入门"><!--[--><!--]--> 03-MongoDB入门 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第1章 专辑管理.md" class="" aria-label="第1章 专辑管理"><!--[--><!--]--> 第1章 专辑管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第2章 声音管理.md" class="" aria-label="第2章 声音管理"><!--[--><!--]--> 第2章 声音管理 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第3章 用户登录.md" class="" aria-label="第3章 用户登录"><!--[--><!--]--> 第3章 用户登录 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第4章 检索模块.md" class="" aria-label="第4章 检索模块"><!--[--><!--]--> 第4章 检索模块 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第5章 详情介绍.md" class="" aria-label="第5章 详情介绍"><!--[--><!--]--> 第5章 详情介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第6章 详情优化.md" class="" aria-label="第6章 详情优化"><!--[--><!--]--> 第6章 详情优化 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第7章 订单.md" class="" aria-label="第7章 订单"><!--[--><!--]--> 第7章 订单 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第8章 支付.md" class="" aria-label="第8章 支付"><!--[--><!--]--> 第8章 支付 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第9章 分布式任务调度.md" class="" aria-label="第9章 分布式任务调度"><!--[--><!--]--> 第9章 分布式任务调度 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tingshu/第10章 直播.md" class="" aria-label="第10章 直播"><!--[--><!--]--> 第10章 直播 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试专题01"><span class="title">面试专题01</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试专题01"><span class="title">面试专题01</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/interview/00.高频面试题/高频面试题.md" class="" aria-label="高频面试题"><!--[--><!--]--> 高频面试题 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/01.Java基础/01.JAVASE/JAVASE.md" class="" aria-label="Java基础"><!--[--><!--]--> Java基础 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/01.Java基础/01.JAVASE/JAVASE.md" class="" aria-label="01.JAVASE"><!--[--><!--]--> 01.JAVASE <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/01.Java基础/02.集合类/集合类.md" class="" aria-label="02.集合类"><!--[--><!--]--> 02.集合类 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/02.Java框架/01.MyBatis/MyBatis.md" class="" aria-label="Java框架"><!--[--><!--]--> Java框架 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/02.Java框架/01.MyBatis/MyBatis.md" class="" aria-label="01.MyBatis"><!--[--><!--]--> 01.MyBatis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/02.Java框架/02.Spring、SpringMVC、SpringBoot/Spring、SpringMVC、SpringBoot.md" class="" aria-label="02.Spring、SpringMVC、SpringBoot"><!--[--><!--]--> 02.Spring、SpringMVC、SpringBoot <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/02.Java框架/03.SpringCloud/SpringCloud.md" class="" aria-label="03.SpringCloud"><!--[--><!--]--> 03.SpringCloud <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/03.Java高级/01.JVM/JVM.md" class="" aria-label="Java高级"><!--[--><!--]--> Java高级 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/03.Java高级/01.JVM/JVM.md" class="" aria-label="01.JVM"><!--[--><!--]--> 01.JVM <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/03.Java高级/02.JUC/JUC.md" class="" aria-label="02.JUC"><!--[--><!--]--> 02.JUC <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/线程、并发/线程、并发.md" class="" aria-label="04.线程、并发"><!--[--><!--]--> 04.线程、并发 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/03.Java高级/03.设计模式/设计模式.md" class="" aria-label="05.设计模式"><!--[--><!--]--> 05.设计模式 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/07.分布式/微服务、分布式/微服务、分布式.md" class="" aria-label="分布式"><!--[--><!--]--> 分布式 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/微服务、分布式/微服务、分布式.md" class="" aria-label="01.微服务、分布式"><!--[--><!--]--> 01.微服务、分布式 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/Cloud核心中间件/Cloud核心中间件.md" class="" aria-label="02.Cloud核心中间件"><!--[--><!--]--> 02.Cloud核心中间件 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="面试专题02"><span class="title">面试专题02</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="面试专题02"><span class="title">面试专题02</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/04.数据库/MySQL/MySQL.md" class="" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/04.数据库/MySQL/MySQL.md" class="" aria-label="01.MYSQL"><!--[--><!--]--> 01.MYSQL <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/05.缓存/Redis/Redis.md" class="" aria-label="02.Redis"><!--[--><!--]--> 02.Redis <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/06.消息队列/RabbitMQ/RabbitMQ.md" class="" aria-label="03.消息队列"><!--[--><!--]--> 03.消息队列 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/07.分布式/ElasticSearch/ElasticSearch.md" class="" aria-label="04.ElasticSearch"><!--[--><!--]--> 04.ElasticSearch <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/08.场景题/场景题/场景题.md" class="" aria-label="场景题"><!--[--><!--]--> 场景题 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/08.场景题/场景题/场景题.md" class="" aria-label="01.场景题"><!--[--><!--]--> 01.场景题 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/08.场景题/项目上线问题排查/项目上线问题排查.md" class="" aria-label="02.项目上线问题排查"><!--[--><!--]--> 02.项目上线问题排查 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/09.人事面试/人事面试.md" class="" aria-label="03.人事面试"><!--[--><!--]--> 03.人事面试 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><a href="/interview/10.网络/计算机网络/计算机网络.md" class="" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/interview/10.网络/计算机网络/计算机网络.md" class="" aria-label="01.计算机网络"><!--[--><!--]--> 01.计算机网络 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/10.网络/Netty/Netty.md" class="" aria-label="02.Netty"><!--[--><!--]--> 02.Netty <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/10.网络/Tomcat/Tomcat.md" class="" aria-label="03.Tomcat"><!--[--><!--]--> 03.Tomcat <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/interview/11.热门领域概念/云计算/云计算.md" class="" aria-label="04.云计算"><!--[--><!--]--> 04.云计算 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/laohix/laohix.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">1 Gateway组件 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-1-gateway简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1 Gateway简介"><!--[--><!--]--> 1.1 Gateway简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-2-gateway入门" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2 Gateway入门"><!--[--><!--]--> 1.2 Gateway入门 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-3-网关路由流程图" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3 网关路由流程图"><!--[--><!--]--> 1.3 网关路由流程图 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-4-路由工厂" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.4 路由工厂"><!--[--><!--]--> 1.4 路由工厂 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-过滤器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5 过滤器"><!--[--><!--]--> 1.5 过滤器 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-1-过滤器简介" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5.1 过滤器简介"><!--[--><!--]--> 1.5.1 过滤器简介 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-2-内置过滤器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5.2 内置过滤器"><!--[--><!--]--> 1.5.2 内置过滤器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-3-路由过滤器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5.3 路由过滤器"><!--[--><!--]--> 1.5.3 路由过滤器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-4-默认过滤器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5.4 默认过滤器"><!--[--><!--]--> 1.5.4 默认过滤器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-5-全局过滤器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5.5 全局过滤器"><!--[--><!--]--> 1.5.5 全局过滤器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_1-5-6-过滤器执行顺序" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5.6 过滤器执行顺序"><!--[--><!--]--> 1.5.6 过滤器执行顺序 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-1-统一配置管理" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1 统一配置管理"><!--[--><!--]--> 2.1 统一配置管理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-2-nacos入门" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2 Nacos入门"><!--[--><!--]--> 2.2 Nacos入门 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-2-1-nacos中添加配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2.1 Nacos中添加配置"><!--[--><!--]--> 2.2.1 Nacos中添加配置 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-2-2-微服务集成配置中心" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2.2 微服务集成配置中心"><!--[--><!--]--> 2.2.2 微服务集成配置中心 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-2-3-读取自定义配置" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2.3 读取自定义配置"><!--[--><!--]--> 2.2.3 读取自定义配置 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-3-配置热更新" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3 配置热更新"><!--[--><!--]--> 2.3 配置热更新 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-4-配置内容共享" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.4 配置内容共享"><!--[--><!--]--> 2.4 配置内容共享 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_2-5-配置优先级" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.5 配置优先级"><!--[--><!--]--> 2.5 配置优先级 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-1-初识sentinel" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1 初识sentinel"><!--[--><!--]--> 3.1 初识sentinel <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-1-1-雪崩效应" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1.1 雪崩效应"><!--[--><!--]--> 3.1.1 雪崩效应 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-1-2-解决方案" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1.2 解决方案"><!--[--><!--]--> 3.1.2 解决方案 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-1-3-sentinel介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1.3 sentinel介绍"><!--[--><!--]--> 3.1.3 sentinel介绍 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-2-sentinel入门" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2 sentinel入门"><!--[--><!--]--> 3.2 sentinel入门 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-2-1-下载sentinel" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.1 下载sentinel"><!--[--><!--]--> 3.2.1 下载sentinel <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-2-2-启动sentinel" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.2 启动sentinel"><!--[--><!--]--> 3.2.2 启动sentinel <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-2-3-访问sentinel" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.3 访问sentinel"><!--[--><!--]--> 3.2.3 访问sentinel <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-2-4-整合sentinel" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2.4 整合sentinel"><!--[--><!--]--> 3.2.4 整合sentinel <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-3-流量控制" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3 流量控制"><!--[--><!--]--> 3.3 流量控制 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-3-1-相关概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.1 相关概念"><!--[--><!--]--> 3.3.1 相关概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-3-2-快速入门" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.2 快速入门"><!--[--><!--]--> 3.3.2 快速入门 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-3-3-流控模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.3 流控模式"><!--[--><!--]--> 3.3.3 流控模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-3-4-流控效果" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.4 流控效果"><!--[--><!--]--> 3.3.4 流控效果 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-3-5-热点参数限流" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3.5 热点参数限流"><!--[--><!--]--> 3.3.5 热点参数限流 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-4-隔离处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4 隔离处理"><!--[--><!--]--> 3.4 隔离处理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-4-1-实现方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.1 实现方式"><!--[--><!--]--> 3.4.1 实现方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-4-2-sentinel实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.2 sentinel实现"><!--[--><!--]--> 3.4.2 sentinel实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-4-3-案例演示" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.3 案例演示"><!--[--><!--]--> 3.4.3 案例演示 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-4-4-降级逻辑" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4.4 降级逻辑"><!--[--><!--]--> 3.4.4 降级逻辑 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-5-熔断处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5 熔断处理"><!--[--><!--]--> 3.5 熔断处理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-5-1-工作原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.1 工作原理"><!--[--><!--]--> 3.5.1 工作原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-5-2-慢调用比例" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.2 慢调用比例"><!--[--><!--]--> 3.5.2 慢调用比例 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-5-3-异常比例和异常数" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5.3 异常比例和异常数"><!--[--><!--]--> 3.5.3 异常比例和异常数 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-6-规则持久化" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.6 规则持久化"><!--[--><!--]--> 3.6 规则持久化 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-6-1-规则持久化概述" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.6.1 规则持久化概述"><!--[--><!--]--> 3.6.1 规则持久化概述 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/spzx/day12/day12%E8%AF%BE%E4%BB%B6.html#_3-6-2-规则持久化实战" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.6.2 规则持久化实战"><!--[--><!--]--> 3.6.2 规则持久化实战 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="_1-gateway组件" tabindex="-1"><a class="header-anchor" href="#_1-gateway组件" aria-hidden="true">#</a> 1 Gateway组件</h1><h2 id="_1-1-gateway简介" tabindex="-1"><a class="header-anchor" href="#_1-1-gateway简介" aria-hidden="true">#</a> 1.1 Gateway简介</h2><p>Gateway服务网关组件是我们服务的守门神，所有微服务的统一入口。</p><p>网关的<strong>核心功能特性</strong>：</p><p>1、请求路由</p><p>2、权限控制</p><p>3、流量监控</p><p>4、统一日志处理</p><p>架构图：</p><p><img src="/assets/image-20230624161556300-26113d20.png" alt="image-20230624161556300"></p><p><strong>权限控制</strong>：网关作为微服务入口，需要校验用户是是否有请求资格，如果没有则进行拦截。</p><p><strong>路由和负载均衡</strong>：一切请求都必须先经过Gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路</p><p>由的目标服务有多个时，还需要做负载均衡。</p><p><strong>限流</strong>：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。</p><p>在SpringCloud中网关的实现包括两种：</p><p>1、Gateway</p><p>2、Zuul</p><p>Zuul是基于Servlet的实现，属于阻塞式编程。而Spring Cloud Gateway则是基于Spring5中提供的WebFlux，属于响应式编程的实现，具备更好的性</p><p>能。</p><h2 id="_1-2-gateway入门" tabindex="-1"><a class="header-anchor" href="#_1-2-gateway入门" aria-hidden="true">#</a> 1.2 Gateway入门</h2><p>下面，我们就演示下网关的基本路由功能。</p><p>基本步骤如下：</p><p>1、创建一个spring boot项目作为gateway，引入如下依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--网关--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--nacos服务发现依赖--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 负载均衡组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、编写启动类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// com.atguigu.spzx.cloud.gateway</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayApplication</span> <span class="token punctuation">{</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、在application.yml配置文件中编写基础配置和路由规则</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.136.142<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user				<span class="token comment"># 路由id，可以自定义，只要唯一即可</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user		    <span class="token comment"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/user/<span class="token important">**</span>			    <span class="token comment"># 这个是按照路径匹配，只要以/user/开头就符合要求</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、重启测试</p><p>重启网关，访问http://localhost/api/user/findUserByUserId/1时，符合<code>/api/user/**</code>规则，</p><p>请求转发到uri：http://spzx-cloud-user/api/user/findUserByUserId/1，得到了结果：</p><p><img src="/assets/image-20230624163155679-3e4e17d7.png" alt="image-20230624163155679"></p><h2 id="_1-3-网关路由流程图" tabindex="-1"><a class="header-anchor" href="#_1-3-网关路由流程图" aria-hidden="true">#</a> 1.3 网关路由流程图</h2><p>整体访问流程如下所示：</p><p><img src="/assets/image-20230624163249195-802dbdd1.png" alt="image-20230624163249195"></p><h2 id="_1-4-路由工厂" tabindex="-1"><a class="header-anchor" href="#_1-4-路由工厂" aria-hidden="true">#</a> 1.4 路由工厂</h2><p>思考问题：我们在配置文件中只是配置了一个访问路径的规则，怎么就可以实现路由呢?</p><p>底层原理：框架底层会自动读取配置文件中的内容，然后通过制定的路由工厂将其转换成对应的判断条件，然后进行判断。</p><p>在Gateway中提供了很多的路由工厂如下所示：https://docs.spring.io/spring-cloud-gateway/docs/4.0.6/reference/html/#gateway-request-predicates-factories</p><p><img src="/assets/image-20230624163811030-5c683e05.png" alt="image-20230624163811030"></p><p>大致有12个，每一种路由工厂的使用Spring Cloud的官网都给出了具体的示例代码，我们可以参考示例代码进行使用。以After Route Predicate</p><p>Factory路由工厂举例，如下所示：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/user/<span class="token important">**</span>
            <span class="token punctuation">-</span> After=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>  <span class="token comment"># 系统时间在2017-01-20之后才可以进行访问</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-5-过滤器" tabindex="-1"><a class="header-anchor" href="#_1-5-过滤器" aria-hidden="true">#</a> 1.5 过滤器</h2><h3 id="_1-5-1-过滤器简介" tabindex="-1"><a class="header-anchor" href="#_1-5-1-过滤器简介" aria-hidden="true">#</a> 1.5.1 过滤器简介</h3><p>在gateway中要实现其他的功能：权限控制、流量监控、统一日志处理等。就需要使用到gateway中所提供的过滤器了。过滤器，可以对进入网关的请</p><p>求和微服务返回的响应做处理：</p><p><img src="/assets/image-20230624164230054-d7631508.png" alt="image-20230624164230054"></p><h3 id="_1-5-2-内置过滤器" tabindex="-1"><a class="header-anchor" href="#_1-5-2-内置过滤器" aria-hidden="true">#</a> 1.5.2 内置过滤器</h3><p>spring gateway提供了31种不同的过滤器。</p><p>官网地址：https://docs.spring.io/spring-cloud-gateway/docs/2.2.9.RELEASE/reference/html/#gatewayfilter-factories</p><p>例如：</p><table><thead><tr><th><strong>名称</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>给当前请求添加一个请求头</td></tr><tr><td>RemoveRequestHeader</td><td>移除请求中的一个请求头</td></tr><tr><td>AddResponseHeader</td><td>给响应结果中添加一个响应头</td></tr><tr><td>RemoveResponseHeader</td><td>从响应结果中移除有一个响应头</td></tr><tr><td>RequestRateLimiter</td><td>限制请求的流量</td></tr></tbody></table><p>在Gateway中提供了三种级别的类型的过滤器：</p><p>1、路由过滤器：只针对当前路由有效</p><p>2、默认过滤器：针对所有的路由都有效</p><p>3、全局过滤器：针对所有的路由都有效，需要进行自定义</p><h3 id="_1-5-3-路由过滤器" tabindex="-1"><a class="header-anchor" href="#_1-5-3-路由过滤器" aria-hidden="true">#</a> 1.5.3 路由过滤器</h3><p>需求：给所有进入spzx-cloud-user的请求添加一个请求头：Truth=atguigu</p><p>实现：</p><p>1、修改gateway服务的application.yml文件，添加路由过滤</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/user/<span class="token important">**</span>
          <span class="token key atrule">filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> AddRequestHeader=Truth<span class="token punctuation">,</span> atguigu		<span class="token comment"># 配置路由基本的过滤器，给访问user微服务的所有接口添加Truth请求头</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当前过滤器写在spzx-cloud-user路由下，因此仅仅对访问spzx-cloud-user的请求有效。</p><p>2、在spzx-cloud-user的接口方法中读取请求头数据，进行测试</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} &quot;</span> <span class="token punctuation">,</span> header<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-4-默认过滤器" tabindex="-1"><a class="header-anchor" href="#_1-5-4-默认过滤器" aria-hidden="true">#</a> 1.5.4 默认过滤器</h3><p>如果要对所有的路由都生效，则可以将过滤器工厂写到default下。格式如下：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/user/<span class="token important">**</span>
            <span class="token punctuation">-</span> After=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
      <span class="token key atrule">default-filters</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> AddRequestHeader=Truth<span class="token punctuation">,</span> atguigu is good
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-5-全局过滤器" tabindex="-1"><a class="header-anchor" href="#_1-5-5-全局过滤器" aria-hidden="true">#</a> 1.5.5 全局过滤器</h3><p>上述的过滤器是gateway中提供的默认的过滤器，每一个过滤器的功能都是固定的。但是如果我们希望拦截请求，做自己的业务逻辑，默认的过滤器就</p><p>没办法实现。</p><p>此时就需求使用全局过滤器，全局过滤器的作用也是处理一切进入网关的请求和微服务响应，与GatewayFilter的作用一样。区别在于GatewayFilter</p><p>通过配置定义，处理逻辑是固定的；而GlobalFilter的逻辑需要自己写代码实现。</p><p>需求：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件：</p><p>1、请求参数中是否有authorization</p><p>2、authorization参数值是否为admin</p><p>如果同时满足则放行，否则拦截</p><p>步骤：</p><p>1、定义一个类实现GlobalFilter接口</p><p>2、重写filter方法</p><p>3、将该类纳入到spring容器中</p><p>4、实现Ordered接口定义该过滤器的顺序</p><p>代码：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AuthorizationFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span> <span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 1、获取请求参数</span>
        <span class="token class-name">MultiValueMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2、判断是否包含authorization</span>
        <span class="token class-name">String</span> authorization <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">&quot;authorization&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>authorization <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>authorization<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>            <span class="token comment">// 设置一个响应状态码401</span>
            <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>                                 <span class="token comment">// 结束请求</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 3、校验请求参数的值是否为admin，如果是放行，如果不是拦截</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>authorization<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">UNAUTHORIZED</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>            <span class="token comment">// 设置一个响应状态码401</span>
            <span class="token keyword">return</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>                                 <span class="token comment">// 结束请求</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 放行</span>
        <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-5-6-过滤器执行顺序" tabindex="-1"><a class="header-anchor" href="#_1-5-6-过滤器执行顺序" aria-hidden="true">#</a> 1.5.6 过滤器执行顺序</h3><p>请求进入网关会碰到三类过滤器：当前路由的过滤器、DefaultFilter、GlobalFilter</p><p>请求路由后，会将当前路由过滤器和DefaultFilter、GlobalFilter，合并到一个过滤器链（集合）中，排序后依次执行每个过滤器：</p><p><img src="/assets/image-20230624170925571-5848a76b.png" alt="image-20230624170925571"></p><p>排序的规则是什么呢？</p><p>1、按照order的值进行排序，order的值越小，优先级越高，执行顺序越靠前。</p><p>2、路由过滤器和默认过滤器会按照order的值进行排序，这个值由spring进行指定，默认是按照声明顺序从1递增</p><p>3、当过滤器的order值一样时，会按照 globalFilter &gt; defaultFilter &gt; 路由过滤器的顺序执行</p><p>核心源码分析：org.springframework.cloud.gateway.handler.FilteringWebHandler#handle方法会加载全局过滤器，与前面的过滤器合并后根据</p><p>order排序，组织过滤器链</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Route</span> route <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Route</span><span class="token punctuation">)</span>exchange<span class="token punctuation">.</span><span class="token function">getRequiredAttribute</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchangeUtils</span><span class="token punctuation">.</span><span class="token constant">GATEWAY_ROUTE_ATTR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 获取路由级别的过滤器和默认过滤器的集合</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">&gt;</span></span> gatewayFilters <span class="token operator">=</span> route<span class="token punctuation">.</span><span class="token function">getFilters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 获取全局过滤器的集合</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GatewayFilter</span><span class="token punctuation">&gt;</span></span> combined <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>globalFilters<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 将取路由级别的过滤器和默认过滤器的集合中的元素添加到全局过滤器的集合中</span>
    combined<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>gatewayFilters<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 进行排序</span>
    <span class="token class-name">AnnotationAwareOrderComparator</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>combined<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Sorted gatewayFilterFactories: &quot;</span> <span class="token operator">+</span> combined<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 调用过滤器链中的filter方法</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DefaultGatewayFilterChain</span><span class="token punctuation">(</span>combined<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="_2-nacos配置中心" tabindex="-1"><a class="header-anchor" href="#_2-nacos配置中心" aria-hidden="true">#</a> 2 Nacos配置中心</h1><p>Nacos除了可以做注册中心，同样可以做配置管理来使用。</p><h2 id="_2-1-统一配置管理" tabindex="-1"><a class="header-anchor" href="#_2-1-统一配置管理" aria-hidden="true">#</a> 2.1 统一配置管理</h2><p>当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。我们需要一种统一配置管理方案，可以集中</p><p>管理所有实例的配置。</p><p><img src="/assets/image-20230624171403235-1639e3f3.png" alt="image-20230624171403235"></p><p>nacos一方面可以将配置集中管理，另一方可以在配置变更时，及时通知微服务，实现配置的热更新。</p><h2 id="_2-2-nacos入门" tabindex="-1"><a class="header-anchor" href="#_2-2-nacos入门" aria-hidden="true">#</a> 2.2 Nacos入门</h2><h3 id="_2-2-1-nacos中添加配置" tabindex="-1"><a class="header-anchor" href="#_2-2-1-nacos中添加配置" aria-hidden="true">#</a> 2.2.1 Nacos中添加配置</h3><p>在Nacos服务端创建一个配置，如下所示：</p><p><img src="/assets/image-20230624171530387-7a6e7366.png" alt="image-20230624171530387"></p><p>然后在弹出的表单中，填写配置信息：</p><p><img src="/assets/image-20210714164856664-b0355b6e.png" alt="image-20210714164856664"></p><h3 id="_2-2-2-微服务集成配置中心" tabindex="-1"><a class="header-anchor" href="#_2-2-2-微服务集成配置中心" aria-hidden="true">#</a> 2.2.2 微服务集成配置中心</h3><p>微服务需要进行改造，从Nacos配置中心中获取配置信息进行使用。</p><p>步骤：</p><p>1、在spzx-cloud-user微服务中，引入spring-cloud-starter-alibaba-nacos-config依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- nacos作为配置中心时所对应的依赖 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在spzx-cloud-user项目的 /src/main/resources/application.yml 配置文件中配置 Nacos Config 地址并引入服务配置</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># 配置数据库的连接信息</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.136.142<span class="token punctuation">:</span><span class="token number">8848</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token key atrule">import</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user<span class="token punctuation">-</span>dev.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-3-读取自定义配置" tabindex="-1"><a class="header-anchor" href="#_2-2-3-读取自定义配置" aria-hidden="true">#</a> 2.2.3 读取自定义配置</h3><h4 id="value" tabindex="-1"><a class="header-anchor" href="#value" aria-hidden="true">#</a> @Value</h4><p>通过@Value注解读取自定义配置，如下所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/api/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${pattern.dateformat}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> pattern <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} , dateformat: {} &quot;</span> <span class="token punctuation">,</span> header <span class="token punctuation">,</span> pattern<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="configurationproperties" tabindex="-1"><a class="header-anchor" href="#configurationproperties" aria-hidden="true">#</a> @ConfigurationProperties</h4><p>也可以通过实体类，配合@ConfigurationProperties注解读取自定义配置，代码如下所示：</p><p>1、定义一个实体类，代码如下所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;pattern&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PatternProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> dateformat <span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在启动类上添加@EnableConfigurationProperties注解，如下所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token class-name">PatternProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">UserApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、使用该实体类，代码如下所示：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/api/user&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserService</span> userService <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${pattern.dateformat}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> pattern <span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>   <span class="token comment">// 注入实体类</span>
    <span class="token keyword">private</span> <span class="token class-name">PatternProperties</span> patternProperties <span class="token punctuation">;</span> 

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span> <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} , dateformat: {} &quot;</span> <span class="token punctuation">,</span> header <span class="token punctuation">,</span> patternProperties<span class="token punctuation">.</span><span class="token function">getDateformat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-3-配置热更新" tabindex="-1"><a class="header-anchor" href="#_2-3-配置热更新" aria-hidden="true">#</a> 2.3 配置热更新</h2><p>我们最终的目的，是修改Nacos中的配置后，微服务中无需重启即可让配置生效，也就是<strong>配置热更新</strong>。实现配置的热更新有两种方式：</p><blockquote><p>方式一：在@Value注入的变量所在类上添加注解**@RefreshScope**</p></blockquote><p><img src="/assets/image-20230624200928589-5ed1286e.png" alt="image-20230624200928589"></p><blockquote><p>方式二：通过实体类，配合@ConfigurationProperties注解读取配置信息，<strong>自动</strong>支持热更新</p></blockquote><h2 id="_2-4-配置内容共享" tabindex="-1"><a class="header-anchor" href="#_2-4-配置内容共享" aria-hidden="true">#</a> 2.4 配置内容共享</h2><p>如果多个环境存在相同的配置，那么此时就可以将相同的配置抽取到一个新的配置中，然后在微服务中再次导入新的配置。那么此时就实现了多环境</p><p>配置共享。</p><p>案例演示：</p><p>1、在Nacos上创建一个不带环境的配置</p><p><img src="/assets/image-20230624201831037-a2fca67d.png" alt="image-20230624201831037"></p><p>2、微服务读取共享配置，在实体类中添加对应的属性</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;pattern&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PatternProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> dateformat <span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> envSharedValue <span class="token punctuation">;</span>		<span class="token comment">// 读取共享配置属性</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、在微服务的配置文件中，通过spring.config.import导入最新的配置</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token key atrule">import</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user<span class="token punctuation">-</span>dev.yml
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>spzx<span class="token punctuation">-</span>cloud<span class="token punctuation">-</span>user.yml       <span class="token comment"># 导入共享配置</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-5-配置优先级" tabindex="-1"><a class="header-anchor" href="#_2-5-配置优先级" aria-hidden="true">#</a> 2.5 配置优先级</h2><p>思考问题：如果在application.yml文件中和Nacos配置中心中都定义了相同的配置内容，那么哪一个配置的优先级较高呢?</p><p>优先级顺序：Nacos配置中心的配置(后导入的配置 &gt; 先导入的配置) &gt; application.yml</p><h1 id="_3-sentinel组件" tabindex="-1"><a class="header-anchor" href="#_3-sentinel组件" aria-hidden="true">#</a> 3 Sentinel组件</h1><h2 id="_3-1-初识sentinel" tabindex="-1"><a class="header-anchor" href="#_3-1-初识sentinel" aria-hidden="true">#</a> 3.1 初识sentinel</h2><h3 id="_3-1-1-雪崩效应" tabindex="-1"><a class="header-anchor" href="#_3-1-1-雪崩效应" aria-hidden="true">#</a> 3.1.1 雪崩效应</h3><p>概述：在微服务系统架构中中，服务间调用关系错综复杂，一个微服务往往依赖于多个其它微服务。一个服务的不可用导致整个系统的不可用的现象就</p><p>被称之为雪崩效应。</p><p>如下图所示：</p><p><img src="/assets/image-20230624203044831-16882902699931-2c22c129.png" alt="image-20230624203044831"></p><p>当服务D出现了问题了以后，调用服务D的服务A的线程就得不到及时的释放，在高并发情况下，随着时间的不断推移服务A的系统资源会被线程耗尽，</p><p>最终导致服务A出现了问题，同理就会导致其他的服务也不能进行访问了。</p><h3 id="_3-1-2-解决方案" tabindex="-1"><a class="header-anchor" href="#_3-1-2-解决方案" aria-hidden="true">#</a> 3.1.2 解决方案</h3><h4 id="超时处理" tabindex="-1"><a class="header-anchor" href="#超时处理" aria-hidden="true">#</a> 超时处理</h4><p>超时处理：设定超时时间，请求超过一定时间没有响应就返回错误信息，不会无休止等待</p><p><img src="/assets/image-20230624203153340-16882902699943-b9ffabfa.png" alt="image-20230624203153340"></p><h4 id="隔离处理" tabindex="-1"><a class="header-anchor" href="#隔离处理" aria-hidden="true">#</a> 隔离处理</h4><p>隔离处理：将错误隔离在可控的范围之内，不要让其影响到其他的程序的运行。</p><p>这种设计思想，来源于船舱的设计，如下图所示：</p><p><img src="/assets/image-20230624203222353-16882902699932-ed9d005e.png" alt="image-20230624203222353"></p><p>船舱都会被隔板分离为多个独立空间，当船体破损时，只会导致部分空间进入，将故障控制在一定范围内，避免整个船体都被淹没。于此类似，我们业</p><p>务系统也可以使用这种思想来防止出现雪崩效应，常见的隔离方式：线程隔离</p><p><img src="/assets/image-20230624203256590-16882902699944-e19d85de.png" alt="image-20230624203256590"></p><h4 id="熔断处理" tabindex="-1"><a class="header-anchor" href="#熔断处理" aria-hidden="true">#</a> 熔断处理</h4><p>熔断处理：由<strong>断路器</strong>统计业务执行的异常比例，如果超出阈值则会<strong>熔断</strong>该业务，拦截访问该业务的一切请求。</p><p>断路器会统计访问某个服务的请求数量，异常比例如下所示：</p><p><img src="/assets/image-20230624203334370-16882902699945-5a7e52ee.png" alt="image-20230624203334370"></p><p>请求了三次，两次出现异常，一次成功。当发现访问服务D的请求异常比例过高时，认为服务D有导致雪崩的风险，会拦截访问服务D的一切请求，形</p><p>成熔断：</p><p><img src="/assets/image-20230624203409785-16882902699946-58bf4452.png" alt="image-20230624203409785"></p><p>触发熔断了以后，当在访问服务A的时候，就不会在通过服务A去访问服务D了，立马给用户进行返回，返回的是一种默认值，这种返回就是一种兜底</p><p>方案。这种兜底方案也将其称之为降级逻辑。</p><h4 id="流量控制" tabindex="-1"><a class="header-anchor" href="#流量控制" aria-hidden="true">#</a> 流量控制</h4><p>流量控制：限制业务访问的QPS(每秒的请求数)，避免服务因流量的突增而故障。</p><p><img src="/assets/image-20230624203508014-16882902699947-cd7ce729.png" alt="image-20230624203508014"></p><p>限流是一种<strong>预防</strong>措施，避免因瞬间高并发流量而导致服务故障，进而避免雪崩。其他的处理方式是一种<strong>补救</strong>措施，在部分服务故障时，将故障控制在</p><p>一定范围，避免雪崩。</p><h3 id="_3-1-3-sentinel介绍" tabindex="-1"><a class="header-anchor" href="#_3-1-3-sentinel介绍" aria-hidden="true">#</a> 3.1.3 sentinel介绍</h3><p>官网地址：https://sentinelguard.io/zh-cn/</p><p><img src="/assets/image-20230624203655208-16882902699948-a40e21e2.png" alt="image-20230624203655208"></p><p>具有的特征:</p><p><img src="/assets/image-20230624203730680-16882902699949-7893617f.png" alt="image-20230624203730680"></p><h2 id="_3-2-sentinel入门" tabindex="-1"><a class="header-anchor" href="#_3-2-sentinel入门" aria-hidden="true">#</a> 3.2 sentinel入门</h2><h3 id="_3-2-1-下载sentinel" tabindex="-1"><a class="header-anchor" href="#_3-2-1-下载sentinel" aria-hidden="true">#</a> 3.2.1 下载sentinel</h3><p>sentinel管理后台下载地址：https://github.com/alibaba/Sentinel/releases</p><p><img src="/assets/image-20230624215112184-168829026999410-2c051cc6.png" alt="image-20230624215112184"></p><p>下载完毕以后就会得到一个jar包</p><p><img src="/assets/image-20230624215403344-168829026999411-bf696610.png" alt="image-20230624215403344"></p><h3 id="_3-2-2-启动sentinel" tabindex="-1"><a class="header-anchor" href="#_3-2-2-启动sentinel" aria-hidden="true">#</a> 3.2.2 启动sentinel</h3><p>将jar包放到任意非中文目录，执行命令：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>java <span class="token operator">-</span>jar sentinel<span class="token operator">-</span>dashboard<span class="token operator">-</span><span class="token number">2.0</span><span class="token number">.0</span><span class="token operator">-</span>alpha<span class="token operator">-</span>preview<span class="token punctuation">.</span>jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果要修改Sentinel的默认端口、账户、密码，可以通过下列配置：</p><table><thead><tr><th><strong>配置项</strong></th><th><strong>默认值</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>server.port</td><td>8080</td><td>服务端口</td></tr><tr><td>sentinel.dashboard.auth.username</td><td>sentinel</td><td>默认用户名</td></tr><tr><td>sentinel.dashboard.auth.password</td><td>sentinel</td><td>默认密码</td></tr></tbody></table><p>例如，修改端口：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-Dserver.port</span><span class="token operator">=</span><span class="token number">8090</span> <span class="token parameter variable">-jar</span> sentinel-dashboard-2.0.0-alpha-preview.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-2-3-访问sentinel" tabindex="-1"><a class="header-anchor" href="#_3-2-3-访问sentinel" aria-hidden="true">#</a> 3.2.3 访问sentinel</h3><p>访问http://localhost:8080页面，就可以看到sentinel的控制台了：</p><p><img src="/assets/image-20230624215635555-168829026999412-726cb4bf.png" alt="image-20230624215635555"></p><p>需要输入账号和密码，默认都是：sentinel</p><p>登录后，发现一片空白，什么都没有：</p><p><img src="/assets/image-20230624215704921-168829026999413-2025c211.png" alt="image-20230624215704921"></p><p>这是因为我们还没有与微服务整合。</p><h3 id="_3-2-4-整合sentinel" tabindex="-1"><a class="header-anchor" href="#_3-2-4-整合sentinel" aria-hidden="true">#</a> 3.2.4 整合sentinel</h3><p>我们在spzx-cloud-user中整合sentinel，并连接sentinel的控制台，步骤如下：</p><p>1、引入sentinel依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--sentinel--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、配置控制台</p><p>修改application.yaml文件，添加下面内容</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span>  <span class="token comment"># 配置sentinel控制台地址</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、访问spzx-cloud-user的任意接口</p><p>打开浏览器，访问http://localhost:10100/api/user/findUserByUserId/1，这样才能触发sentinel的监控。然后再访问sentinel的控制台，查看效</p><p>果：</p><p><img src="/assets/image-20230624220303385-168829026999414-104b3965.png" alt="image-20230624220303385"></p><h2 id="_3-3-流量控制" tabindex="-1"><a class="header-anchor" href="#_3-3-流量控制" aria-hidden="true">#</a> 3.3 流量控制</h2><p>雪崩问题虽然有四种方案，但是限流是避免服务因突发的流量而发生故障，是对微服务雪崩问题的预防。我们先学习这种模式。</p><h3 id="_3-3-1-相关概念" tabindex="-1"><a class="header-anchor" href="#_3-3-1-相关概念" aria-hidden="true">#</a> 3.3.1 相关概念</h3><p><strong>簇点链路</strong>：当请求进入微服务时，首先会访问DispatcherServlet，然后进入Controller、Service、Mapper，这样的一个调用链就叫做簇点链路。</p><p><strong>资源</strong>：簇点链路中被监控的每一个接口就是一个资源，流控、熔断等都是针对簇点链路中的资源来设置的。</p><p>默认情况下sentinel会监控spring mvc的每一个端点（Endpoint，也就是controller中的方法），因此spring mvc的每一个端点就是调用链路中的一个</p><p>资源。</p><p>例如，我们刚才访问的spzx-cloud-user中的UserController中的端点：/api/user/findUserByUserId/{userId}</p><p><img src="/assets/image-20230624220603571-168829026999415-8ab0a341.png" alt="image-20230624220603571"></p><p>我们可以点击对应资源后面的按钮来设置规则：</p><p>1、流控：流量控制</p><p>2、降级：降级熔断</p><p>3、热点：热点参数限流，是限流的一种</p><p>4、授权：请求的权限控制</p><h3 id="_3-3-2-快速入门" tabindex="-1"><a class="header-anchor" href="#_3-3-2-快速入门" aria-hidden="true">#</a> 3.3.2 快速入门</h3><p>需求：给 /api/user/findUserByUserId/{userId}这个资源设置流控规则，QPS不能超过 5，然后测试。</p><p>步骤：</p><p>1、首先在sentinel控制台添加限流规则</p><p><img src="/assets/image-20230628090407483-168829026999416-7e526b25.png" alt="image-20230628090407483"></p><p>2、利用jmeter测试(模拟并发请求)</p><blockquote><p>Apache JMeter 是 Apache 组织基于 Java 开发的压力测试工具，用于对软件做<strong>压力测试</strong>。</p><p>下载地址：https://archive.apache.org/dist/jmeter/binaries/</p></blockquote><p>课前资料提供了编写好的Jmeter测试样例</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABFoAAAAlCAYAAAByBY2UAAAPgUlEQVR4nO3dMY/jSHoG4FfGer3A5ueSL/BkXosMphIfFr7IF1Vyhu0lJ7qz2altnmMlkhLaoa3Lh8AGC4y42QJTf+AcbVAdiPoLTWDzM87wiA6qSJESSVE96p7unfcBGtuSqkoftWqO+Knqq8nbt29LEBERERERERHRe/sEAJRSHzoOIiIiIiIiIqJnTWuNP/rQQRARERERERER/Vgw0UJEREREREREdCVMtBARERERERERXQkTLUREREREREREV8JECxERERERERHRlTDRQkRERERERER0JZ/0PfDNN9+gLEvsyxLlvkRZ7g+33X17d99nn32Gn/3Vz/DFF3/xmLETERERERERET0pvYmWsizxN7/4Bf70Jz+xt+sH3H8nwP/8/vf47rvv8OWXX+J3v/tvlCjxl1988bARExERERERERE9Ub1Lh/ZlCZQl3u33ePduj3fv3tU//+f+W5Y26/L555/j5z//a3z//ff44YcfHi14IiIiIiIiIqKnpH9Gy95NXSmbd3a3/frrrwEAf/zpp/jDH/73WrERERERERERET0rvTNaynJ/+L2RYSnrx0t8+umf4O/+/h/wz//yr/jNb/4N+32J3mzME5GFE0z8FfKHHDdfwa+fI0M4mWBy/BNmzd4IJz5Wufv9XHz5Cv4kRJaFmExCZP0NsfIf5niJiIiIngqTxojjFOaC9okuuh5AnGh0PEJERDTaYI2WsiwPSZbB/El56HPF4K4vx273CE/jLbCYTeD7wHY7A+Bhud1i4bkoVj78HC4hk2NRBo3OAYK67wLe0PMEG5SbEBN/db4tERE9MoP06MJPqDnmShw1SxGnZqDNuHFMGuMwjICaz3H8VJVCJ0j0FNE6guyJAzLCOpJn+t7vGPvG7o21UIPtx7Tp6AWdJNCFbL8O7xnvj5t7zaaH18O+HwpAKMznCj1vufr9KaM1IonDa9z12hYaSaJRXPC6y2gNIEaaCEwH4nDR4NYIyLk4HIORg/ETjTnH1n8PTv1+7x8UcYqTc1A1TnU+bT+3i6DrXEtET0ZvomVfJU0amZPWvJbytEBuWZZPaEJLhnASApsSmzqP4WGxLbF4hGcPNlssfR+rbHOIKJxg5W3xZmRfP5yh3ATnGqPsbfJ4x0tERG0mTXGn5lhXH4RNijhNkKDx4dikiNM7qPnafmAvNJKk3WbMOIVOcPtyjXWE+naSJEBnsqWAMQUgVf3B3n6Il4jWawxf1rb7jj9Gc7jgKDSSJEUMDF9EVxfbAHqDGtOmt+trdE1ouHe8HzMhIAoDU6ju5F6hoY2AEI0XXEaYF3dItIZWstGvgH7dl2SpkmNDwWgkse6IsZEIMrcwQsLlWXBXFJCKSRbqN+YceziPzu3pyKSI0xjAmWRLx3MlujhN0jTfwx3/VhDR0zI4o6V7MstxJuUwi2Vf7jse//jkKx+r2RabbQkgQ3jxCB4Wb7b4yvOQhROEPWuDwsnkcCPYnE/KEBHRo5HRUdJCRohuDVJjUCgFgQJa22/068/JQuFGGSR1mzHj2G82o0YTISWE1ijugJOrx8LAFALqxo1qUndxEJ3PVRz1HRObuTWAUFBVw+oY9S1MJDufs55hsF7jLo2R3rNN/3FovNaAlALm6Fvi+8T70SummEoDrQ1U1ywoY1DIKaRpZ0iEuoEyCfRrDekuIG0CTCKad73SwiYl7ajQyWvgpmfmVs9MAbi/OyHn7k/D4NYAxsQwjTdRM1lzdlYC/eidP8fa95GMGu+36nyoNZQcmcgzaXeS5TQgKKmRdp7kiegp6K/RsrfLhjqTLB2zWQDUuxCd165bcpJIyFfwm/VMWjVGXN2RMEO+8ht1Tw61Suz99nYW2sf9lauY0qrRcn6scTEdmc2wG0iQjOJ58AAEm/KwjKv62S7hIcCmeV9PkuW4Jk0Wdhyve3z49Tw+Hvf/8L0OkojoI1YYmAKQL9ufpoWY1o89BKM1CiEhq29hbw2EUqMSCMd9x5iKnsZCYNrTR6g51meWcZxvU0AncUe9DTtjAuqm8wL9PvES8FIpCKM7ZpsYaA0o9bKjl4C6URCFhjZwCbCifbHaS0BM3QyrDubWAPLl6ThHMRZaw8gI6/Xa/kTSzhyobq+ZZKERigJ3EBBHJwn5UrrHxoyhkTRn0w03tkkeInqyBrZ33h9lU9xyoVaSpZ2IscmZc+ySnt1yWycJgl0jaZGFmPgZgm2VRNhiiWWjuOyh3Su8cW02CJAhdBf93mLr7jskKraLgQomA2NdFJPjBRtst0vswqFCtV1c4qcv2VM/wQyzi8Y90jze7RJevoQ/mcDPF72v5yYAslUzQRUi4ywaIqLx3MWkkLKRHDj9YI6pGP5+snOcVoN66cXph3X7reuhr709FbBJidj9dBYDPe47LjahbqDgLqRdG5vn+DBLNUyaQEPhpme6/VOL99kQCkqeJj5sIqNnSZHrd6METJog6X3fdpNKAVp3FMC1NViU6lh6pE2rnU0CMZNCl+g7x54mP4qx2RC3DBJqPu79b7Sd+cUsINGTNbDrUJVcKZt5lmaDo52fS7fc6EyqJd9hB2A2OyQ+gkVVyDXHapUh2BwKx9plNEt4eYZvm1kNb4k3daMAi6UHZNmFiY0xY10QU2vMBbYu2dPUPO6OTlhsyzpJBBzPMqlm5+wA7LC771ZCzeP1FlgEABBgUydNAgQBgN2uTiQFmw2CfIlXqxz56hWWebM9ERENqmqJiMYF/l0xsLNJz7eVXeO49odESQIj5931RMwtDCTUSSHd18BN9Q3+HAqN2idn+p6P7Q5FUe0K05fEeQh2mUlz1kuhE7tManAmzIeK9/mTL6VNrNT3GGhdnMzaOibUDZQoUFx64SgUlLTP0dSX3Cn0a2g0loUVBe4unKFFH6sz51i33NCkjeLgbobWeQZpolEMnV/deEmVDE/Hz0Qkog9jeNchdFVcKU+SLtWSof2YpUPeVwi8JZbhBBNv2d4tJ/8WWQ7k4QSTjq6zHVA3ns2ut8vO0FiXxNSSIZxkCOpKtffb8chbbFEuqp2KFm4GSY5V9h5LdrqO1/Nas2Rmnge04g2w2S7h+z58eFhuT5NIRER0auyuLG2nM12Gx2nWrrBt4/h4nf+hJszhLjulXbSW0djlHCbR0Ea5/h19R8VWQCcpDJo1YFxB0ySFGFMX5lpMCvuF8dBzPqF4nyOpoHQCrRWkEq7orEJnuZUGO8tIQgqDNH0JeUGyRSoFnbyGlq5Wi0ndrlinY9wVbmaSdvVXhMJ8fsHx0Ufs/Dm23vkqNq5mlE0cpmcLSElEa4UiSYZ3zWqdX+15KTaX/LtCRI+pP9GyL48mp5wmWIB2XZay3I9YOuR2wslX8P0l/MkSOEq4BK2dgp6Gi2NyM2IOXXbIcw/eDEcJjPvwMJvlyHqTPERE9OEddkjpXHM/FRAwpwVrT2a6nBmng1BzREWM9NYgkq5DVROmuUyiqjvSV5ekDqGj75jYqn6tmhuHRM6tiSAfJXNxWDKikxj66LE0NkhlhLUqnki8T5s4We9WPwIpBbQxKJSEaRWd7WFSt+1zhGgqcJekSF/K8XVRhMI8KhAnCRBJmPQOaj7vTIjJyGZV6hkHx9t4N7R2LrooSUofg85zLFyB8EbV3EIngJAj6jsJqHmEIk5hNzM6936zS+N0OrDbFxF9UIPbO1dLh/qSJ8fFb8v9Bds7ewtsy4WtfxIuscoW2AS29shul+PJZBC8+8WU73ZAsECAwM5qyUJMkGP3bY7FYmtfpnx1dpxstcJscbpB88zzkGUZELixV157dtDV5Vi9WgLLLbZ4Bf/VCl896PMRET1vJk3sGvq+WRBCQgoNUxRoZlqK4s49NnKckQpj7LKe1iBTCIGTGFyA9aya7r7Xi+3htb+NrtiZONND/EXHtsDUYJdV9RYMBuxyBp1CpwVMIRENXgEapDbL4hIrboenNIGY9uwm1EVGmBcJklRDqMv6rZtXxYBNvmjBxApdga1ZNH7rcIloXuAu0UhSwe3kiZ65gRot+84ZLO7Bzh2G6uTMkHyFcHVcXMTN9HD1UfKl397hJl/Bv+fuNrt7FzKp3CemHN9mOYIgaLUNNlsEmV/vgNRXx8VFjpV/tNNPFtaFcndfBfDcrJl8t3PLgR5uJ6As9LGEre3iLd7YYsDccYiIqEfHVp8n7DeSdjtbd1e160r9wXzMOAZpnLYKgtpaJM0djWwdi9NCtlUMtn09XqJR1DUu+vqOiK2qW6CbdU5cIcnmFsoPom/XoQEfNN6nz9ZfkRguuWLrTBhzvoaErWfRrsti+7jXfFxQSOLYbfUdYaoTxHHSsfsR0X2NOcdWiee6hZ3thwvPG0JhHsnB2Vb1+LbyOGsMET1RgzVajvZuPjtZpRzRBt4CwWqCSV3wxMNyeyg06y222MKH36yJ4i2x3V66lsgWa52EPuzqpO3wzkODIV8aU2OZUBZiEmbwlltsAg8ItoDvw8dAPPkOO+TIscRy5pZXwcNyWzYK8ubYeUusVjneAPBspgqeh/sVBB6QhROEmYdlPYPFFgPO/BCTkDsPERGdcLVPijSGOVmfL6Dm7lv36pv4xnKW1hKcUePYb0GTOMahiUS0biyfMLcwEFBdn8hlhPVUIElixGnjviqIvr4jj1FGa0x10l6K0Rz/iXlu8T4GncTuAlKcqXFjCSkhtIEcuAI0aVwvGWqPJxFFtzDp8Lf6dV0gSETrdT1GtJaICl3/TQk1x5zrKui9jDjHApCRQhrHiN1toeZY3+e9JyOsAcRpiviuwHzu5uIVmuclomdk8vbt21Kp48m0wPq3v8Uvf/m3+OlP/2z0YMm//wf+8Ve/wosXf37NGJ+ffAX/FfBmkcMPd61EkpUhnKzgbQJk4dLu7NOsU5OFmGTBiASG3So7O0pWtVqEE4RgMoSI6GNm0hgp7veh/H36El1blaAZm0Cp2jcvSk0aQ4ue/lw6RERE70lr3Z9o+c//WtsZKmWJfbm3v++r26UtfLuvfq9+9vinX/8aL168+ACHQ6dyrHwfWXD/2TxERPTMuW2XpyML6V6tLxEREdFHaDDRQj8CWYhJ54waIiIiIiIiIro2rXV/jRZ6vvKVD39pC+4Gm5JJFiIiIiIiIqJHwkTLj5C32KI83RGaiIiIiIiIiB5Y7/bORERERERERER0GSZaiIiIiIiIiIiuhIkWIiIiIiIiIqIrYaKFiIiIiIiIiOhKmGghIiIiIiIiIroSJlqIiIiIiIiIiK6EiRYiIiIiIiIioiv5BAC01h86DiIiIiIiIiKiZ+//AWViCSD1tNA9AAAAAElFTkSuQmCC" alt="image-20230628115300889"></p><p>通过如下命令打开jmeter</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">java</span> <span class="token parameter variable">-jar</span> ApacheJMeter.jar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>导入课前资料提供的测试样例</p><p><img src="/assets/image-20220320111824238-168829026999418-5bc4c33d.png" alt="image-20220320111824238"></p><p>选择流控入门</p><p><img src="/assets/image-20220320111955904-168829026999419-b3d73f77.png" alt="image-20220320111955904"></p><p>10个线程，1秒内运行完，QPS是10，超过了5。</p><p>选中<strong>流控入门，QPS&lt;5</strong>右键运行</p><p><img src="/assets/image-20220320112040803-168829026999420-01543678.png" alt="image-20220320112040803"></p><p>注意：不要点击菜单中的执行按钮来运行。</p><p>点击查看结果树，理想的请求执行结果应该如下所示：</p><p><img src="/assets/image-20220320112142379-168829026999421-249e4d0b.png" alt="image-20220320112142379"></p><p>可以看到，成功的请求每次只有5个。</p><p><strong>注意：如果测试结果不是上述情况，那是因为sentinel在统计请求的时候，把一部分的请求统计到了下一秒中导致的。</strong></p><h3 id="_3-3-3-流控模式" tabindex="-1"><a class="header-anchor" href="#_3-3-3-流控模式" aria-hidden="true">#</a> 3.3.3 流控模式</h3><h4 id="流控模式简介" tabindex="-1"><a class="header-anchor" href="#流控模式简介" aria-hidden="true">#</a> 流控模式简介</h4><p>在添加限流规则时，点击高级选项，可以选择三种<strong>流控模式</strong>：</p><p>1、直接：统计当前资源的请求，触发阈值时对当前资源直接限流，也是默认的模式</p><p>2、关联：统计与当前资源相关的另一个资源，触发阈值时，对当前资源限流</p><p>3、链路：统计从指定链路访问到本资源的请求，触发阈值时，对指定链路限流</p><p>如下所示：</p><p><img src="/assets/image-20230628091856122-168829026999422-43db7563.png" alt="image-20230628091856122"></p><p>快速入门测试的就是直接模式。</p><h4 id="关联模式" tabindex="-1"><a class="header-anchor" href="#关联模式" aria-hidden="true">#</a> 关联模式</h4><p>关联模式：统计与当前资源相关的另一个资源，触发阈值时，对当前资源限流</p><p>配置方式：</p><p><img src="/assets/image-20230628092034118-168829026999423-08f3b90f.png" alt="image-20230628092034118"></p><p>语法说明：对/api/user/updateUserById资源的请求进行统计，当访问流量超过阈值时，就对/api/user/findUserByUserId/{userId}进行限流，避</p><p>免影响/api/user/updateUserById资源。</p><p>使用场景：比如用户支付时需要修改订单状态，同时用户要查询订单。查询和修改操作会争抢数据库锁，产生竞争。业务需求是优先支付和更新订单的</p><p>业务，因此当修改订单业务触发阈值时，需要对查询订单业务限流。</p><p>案例实现：</p><p>1、在UserController新建一个端点：/api/user/updateUserById，无需实现业务</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 修改用户数据端点</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/updateUserById&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">updateUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;修改用户数据成功&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、重启服务，访问对应的端点，让其产生簇点链路</p><p><img src="/assets/image-20230628092515666-168829026999424-97d09f6e.png" alt="image-20230628092515666"></p><p>3、配置流控规则，当/api/user/updateUserById资源被访问的QPS超过5时，对/api/user/findUserByUserId/1请求限流。对哪个端点限流，就点</p><p>击哪个端点后面的按钮。我们是对用户查询/api/user/findUserByUserId/1限流，因此点击它后面的按钮：</p><p><img src="/assets/image-20230628092751648-168829026999425-cb25330b.png" alt="image-20230628092751648"></p><p>4、在Jmeter中进行测试</p><p>选择《流控模式-关联》：</p><p><img src="/assets/image-20220320114459422-168829026999426-4b5ea893.png" alt="image-20220320114459422"></p><p>可以看到1000个线程，100秒，因此QPS为10，超过了我们设定的阈值：5</p><p>查看http请求：</p><p><img src="/assets/image-20230628093126793-168829026999427-3af19c88.png" alt="image-20230628093126793"></p><p>请求的目标是/api/user/updateUserById，这样这个端点就会触发阈值。但限流的目标是/api/user/findUserByUserId/1，我们在浏览器访问，可</p><p>以发现：</p><p><img src="/assets/image-20230628093300378-168829026999428-563fdf8b.png" alt="image-20230628093300378"></p><p>确实被限流了。</p><p>关联流控模式的使用场景：</p><p>1、两个有竞争关系的资源</p><p>2、一个优先级较高，一个优先级较低</p><p>对高优先级的资源的流量进行统计，当超过阈值对低优先级的资源进行限流。</p><h4 id="链路模式" tabindex="-1"><a class="header-anchor" href="#链路模式" aria-hidden="true">#</a> 链路模式</h4><p>链路模式：只针对从指定链路访问到本资源的请求做统计，判断是否超过阈值，如果超过阈值对从该链路请求进行限流。</p><p>配置方式：</p><p>1、/api/user/save --&gt; users</p><p>2、/api/user/query --&gt; users</p><p>如果只希望统计从/api/user/query进入到users的请求，并进行限流操作，则可以这样配置：</p><p><img src="/assets/image-20230628095013326-168829026999429-538d4aa4.png" alt="image-20230628095013326"></p><p>案例实现：</p><p>1、在UserService中添加一个queryUsers方法，不用实现业务</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;查询用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在UserController中，添加两个端点，在这两个端点中分别调用UserService中的queryUsers方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    userService<span class="token punctuation">.</span><span class="token function">queryUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;保存用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;订单保存成功&quot;</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/query&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    userService<span class="token punctuation">.</span><span class="token function">queryUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;查询用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;查询用户成功&quot;</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、通过**@SentinelResource**标记UserService中的queryUsers方法为一个sentinel监控的资源(默认情况下，sentinel只监控controller方法)</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;查询用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5、更改application.yml文件中的sentinel配置</p><p>链路模式中，是对不同来源的两个链路做监控。但是sentinel默认会给进入spring mvc的所有请求设置同一个root资源，会导致链路模式失效。因此需</p><p>要关闭这种资源整合。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">web-context-unify</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># 关闭context整合</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6、重启服务，访问/api/user/save和/api/user/query，可以查看到sentinel的簇点链路规则中，出现了新的资源</p><p><img src="/assets/image-20230628094306219-168829026999430-bfc1a912.png" alt="image-20230628094306219"></p><p>7、添加流控规则</p><p>点击users资源后面的流控按钮，在弹出的表单中填写下面信息：</p><p><img src="/assets/image-20230628094433574-168829026999431-77a916c3.png" alt="image-20230628094433574"></p><p>只统计从/api/user/query进入/users的资源，QPS阈值为2，超出则被限流。</p><p>8、jmeter测试</p><p>选择《流控模式-链路》</p><p><img src="/assets/image-20220320150559229-168829026999432-d111f721.png" alt="image-20220320150559229"></p><p>可以看到这里200个线程，50秒内发完，QPS为4，超过了我们设定的阈值2。</p><p>一个http请求是访问/api/user/save</p><p><img src="/assets/image-20230628094648097-168829026999433-309c19b0.png" alt="image-20230628094648097"></p><p>另一个是访问/api/user/query</p><p><img src="/assets/image-20230628094713655-168829026999434-aae8b20e.png" alt="image-20230628094713655"></p><p>运行测试，察看结果树：</p><p>访问/api/user/save,没有进行限流</p><p><img src="/assets/image-20230628094814795-168829026999435-5e27658d.png" alt="image-20230628094814795"></p><p>访问/api/user/query,进行限流了</p><p><img src="/assets/image-20230628094857374-168829026999536-13765099.png" alt="image-20230628094857374"></p><h3 id="_3-3-4-流控效果" tabindex="-1"><a class="header-anchor" href="#_3-3-4-流控效果" aria-hidden="true">#</a> 3.3.4 流控效果</h3><p>在流控的高级选项中，还有一个流控效果选项</p><p><img src="/assets/image-20230628095109686-168829026999537-56eb3cde.png" alt="image-20230628095109686"></p><p>流控效果是指请求达到流控阈值时应该采取的措施，包括三种：</p><p>1、快速失败：达到阈值后，新的请求会被立即拒绝并抛出FlowException异常，是默认的处理方式</p><p>2、warm up：预热模式，对超出阈值的请求同样是拒绝并抛出异常，但这种模式阈值会动态变化，从一个较小值逐渐增加到最大阈值</p><p>3、排队等待：让所有的请求按照先后次序进入到一个队列中进行排队，当某一个请求最大的预期等待时间超过了所设定的超时时间时同样是拒绝并抛</p><p>出异常</p><h4 id="warm-up" tabindex="-1"><a class="header-anchor" href="#warm-up" aria-hidden="true">#</a> warm up</h4><p>阈值一般是一个微服务能承担的最大QPS，但是一个服务刚刚启动时，一切资源尚未初始化（<strong>冷启动</strong>），如果直接将QPS跑到最大值，可能导致服务</p><p>瞬间宕机。</p><p>warm up也叫<strong>预热模式</strong>，是应对服务冷启动的一种方案。<strong>阈值会动态变化</strong>，从一个较小值逐渐增加到最大阈值。</p><p><strong>工作特点</strong>：请求阈值初始值是 maxThreshold / coldFactor, 持续指定时长(预热时间)后，逐渐提高到maxThreshold值，而coldFactor的默认值是3。</p><p>例如，我设置QPS的maxThreshold为10，预热时间为5秒，那么初始阈值就是 10 / 3 ，也就是3，然后在5秒后逐渐增长到10。</p><p><img src="/assets/image-20220320152944101-168829026999538-93ad7b37.png" alt="image-20220320152944101"></p><p><strong>案例需求</strong>：给/api/user/findUserByUserId/{userId}这个资源设置限流，最大QPS为10，利用warm up效果，预热时长为5秒</p><p>1、配置流控规则</p><p><img src="/assets/image-20230628095505037-168829026999539-ce907984.png" alt="image-20230628095505037"></p><p>2、jmeter测试</p><p>选择《流控效果，warm up》</p><p><img src="/assets/image-20220320153409220-168829026999540-fe90c6e6.png" alt="image-20220320153409220"></p><p>QPS为10</p><p>刚刚启动时，大部分请求失败，成功的只有3个，说明QPS被限定在3：</p><p><img src="/assets/image-20220320153522505-168829026999541-6d3d728f.png" alt="image-20220320153522505"></p><p>随着时间推移，成功比例越来越高</p><p><img src="/assets/image-20220320153646510-168829026999542-b1403ebd.png" alt="image-20220320153646510"></p><p>到sentinel控制台查看实时监控</p><p><img src="/assets/image-20230628095925921-168829026999543-4ee82c1d.png" alt="image-20230628095925921"></p><h4 id="排队等待" tabindex="-1"><a class="header-anchor" href="#排队等待" aria-hidden="true">#</a> 排队等待</h4><p><strong>排队等待</strong>：让所有的请求按照先后次序进入到一个队列中进行排队，当某一个请求最大的预期等待时间超过了所设定的超时时间时同样是拒绝并抛出</p><p>异常</p><p>例如：QPS = 5，意味着每200ms处理一个队列中的请求；timeout = 2000，意味着<strong>预期等待时长</strong>超过2000ms的请求会被拒绝并抛出异常。</p><p>那什么叫做预期等待时长呢？</p><p>比如现在一下子来了12 个请求，因为每200ms执行一个请求，那么：</p><p>1、第6个请求的<strong>预期等待时长</strong> = 200 * （6 - 1） = 1000ms</p><p>2、第12个请求的预期等待时长 = 200 * （12-1） = 2200ms</p><p>现在，第1秒同时接收到10个请求，但第2秒只有1个请求，此时QPS的曲线这样的：</p><p><img src="/assets/image-20230628100019712-168829026999544-9cefb0c7.png" alt="image-20230628100019712"></p><p>如果使用队列模式做流控，所有进入的请求都要排队，以固定的200ms的间隔执行，QPS会变的很平滑</p><p><img src="/assets/image-20230628100049968-168829026999545-4838f4f6.png" alt="image-20230628100049968"></p><p>平滑的QPS曲线，对于服务器来说是更友好的。</p><p><strong>案例需求</strong>：给/api/user/findUserByUserId/{userId}这个资源设置限流，最大QPS为10，利用排队的流控效果，超时时长设置为5s</p><p>1、添加流控规则</p><p><img src="/assets/image-20230628100313331-168829026999546-5f88f8f2.png" alt="image-20230628100313331"></p><p>2、jmeter测试</p><p><img src="/assets/image-20220320154801992-168829026999547-3e1bf092.png" alt="image-20220320154801992"></p><p>QPS为15，已经超过了我们设定的10。</p><p>运行测试用例，察看结果树：</p><p><img src="/assets/image-20220320155103019-168829026999548-c9658fe3.png" alt="image-20220320155103019"></p><p>全部都通过了。</p><p>再去sentinel查看实时监控的QPS曲线</p><p><img src="/assets/image-20220320155202523-168829026999549-698f4394.png" alt="image-20220320155202523"></p><p>QPS非常平滑，一致保持在10，但是超出的请求没有被拒绝，而是放入队列。因此<strong>响应时间</strong>（等待时间）会越来越长。</p><h3 id="_3-3-5-热点参数限流" tabindex="-1"><a class="header-anchor" href="#_3-3-5-热点参数限流" aria-hidden="true">#</a> 3.3.5 热点参数限流</h3><h4 id="配置介绍" tabindex="-1"><a class="header-anchor" href="#配置介绍" aria-hidden="true">#</a> 配置介绍</h4><p>之前的限流是统计访问某个资源的所有请求，判断是否超过QPS阈值。而热点参数限流是<strong>分别统计参数值相同的请求</strong>，判断是否超过QPS阈值。</p><p>例如，一个根据id查询商品的接口：</p><p><img src="/assets/image-20230628100914491-168829026999550-aea652f2.png" alt="image-20230628100914491"></p><p>访问/goods/{id}的请求中，id参数值会有变化，热点参数限流会根据参数值分别统计QPS，统计结果：</p><p><img src="/assets/image-20230628101012945-168829026999551-55dc496a.png" alt="image-20230628101012945"></p><p>当id=1的请求触发阈值被限流时，id值不为1的请求不受影响。</p><p>配置方式(点击资源中的热点按钮)：</p><p><img src="/assets/image-20230628101216576-168829026999552-080b5d62.png" alt="image-20230628101216576"></p><p>代表的含义是：对hot这个资源的0号参数（第一个参数）做统计，每1秒<strong>相同参数值</strong>的请求数不能超过2。这种配置是对查询商品这个接口的所有商品</p><p>一视同仁，QPS都限定为5。而在实际开发中，可能部分商品是热点商品，例如秒杀商品，我们希望这部分商品的QPS限制与其它商品不一样，高一</p><p>些。那就需要配置热点参数限流的高级选项了：</p><p><img src="/assets/image-20230628101331468-168829026999553-940a2c7d.png" alt="image-20230628101331468"></p><h4 id="案例演示" tabindex="-1"><a class="header-anchor" href="#案例演示" aria-hidden="true">#</a> 案例演示</h4><p><strong>案例需求</strong>：给/api/user/findUserByUserId/{userId}这个资源添加热点参数限流，规则如下：</p><p>1、默认的热点参数规则是每1秒请求量不超过2</p><p>2、给2这个参数设置例外：每1秒请求量不超过4</p><p>3、给3这个参数设置例外：每1秒请求量不超过10</p><p><strong>注意事项</strong>：热点参数限流对默认的spring mvc资源无效，需要利用@SentinelResource注解标记资源</p><p>实现步骤：</p><p>1、标记资源</p><p>给UserController中的/api/user/findUserByUserId/{userId}资源添加注解：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span><span class="token string">&quot;hot&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 声明资源名称</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span> <span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} , dateformat: {} &quot;</span> <span class="token punctuation">,</span> header <span class="token punctuation">,</span> patternProperties<span class="token punctuation">.</span><span class="token function">getDateformat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、热点参数限流规则</p><p>访问该接口，可以看到我们标记的hot资源出现了</p><p><img src="/assets/image-20230628101715773-168829026999554-a9c168b6.png" alt="image-20230628101715773"></p><p>这里不要点击hot后面的按钮，页面有BUG</p><p>点击左侧菜单中<strong>热点规则</strong>菜单：</p><p><img src="/assets/image-20230628102031276-168829026999555-1fa94279.png" alt="image-20230628102031276"></p><p>3、jmeter测试</p><p>选择《热点参数限流 QPS1》</p><p><img src="/assets/image-20220320162420189-168829026999556-738b18aa.png" alt="image-20220320162420189"></p><p>这里发起请求的QPS为5。</p><p>包含三个请求，参数分别为：101 ， 102 ， 103，运行测试程序，察看结果树：</p><table><thead><tr><th>101</th><th><img src="/assets/image-20220320162905731-4f8a5c2e.png" alt="image-20220320162905731"></th></tr></thead><tbody><tr><td>102</td><td><img src="/assets/image-20220320163002195-6ae2b52b.png" alt="image-20220320163002195"></td></tr><tr><td>103</td><td><img src="/assets/image-20220320163023729-8c23172b.png" alt="image-20220320163023729"></td></tr></tbody></table><h2 id="_3-4-隔离处理" tabindex="-1"><a class="header-anchor" href="#_3-4-隔离处理" aria-hidden="true">#</a> 3.4 隔离处理</h2><p>隔离处理：将错误隔离在可控的范围之内，不要让其影响到其他的程序的运行。</p><h3 id="_3-4-1-实现方式" tabindex="-1"><a class="header-anchor" href="#_3-4-1-实现方式" aria-hidden="true">#</a> 3.4.1 实现方式</h3><p>线程隔离有两种方式实现：</p><p>1、线程池隔离</p><p>2、信号量隔离（sentinel默认采用）</p><p>如图：</p><p><img src="/assets/image-20230628102441429-168829026999557-89317704.png" alt="image-20230628102441429"></p><p><strong>线程池隔离</strong>：给每个服务调用业务分配一个线程池，利用线程池本身实现隔离效果</p><p><strong>信号量隔离</strong>：不创建线程池，而是计数器模式，记录业务使用的线程数量，达到信号量上限时，禁止新的请求</p><p>两者比对：</p><table><thead><tr><th></th><th style="text-align:center;">线程池隔离</th><th style="text-align:center;">信号量隔离</th></tr></thead><tbody><tr><td>线程</td><td style="text-align:center;">请求线程和调用provider线程<strong>不是</strong>同一个线程</td><td style="text-align:center;">请求线程和调用provider线程<strong>是</strong>同一个线程</td></tr><tr><td>开销</td><td style="text-align:center;">存在线程上下文切换，开销较大</td><td style="text-align:center;">不存在线程上下文切换，开销较小</td></tr><tr><td>异步</td><td style="text-align:center;">支持</td><td style="text-align:center;">不支持</td></tr><tr><td>超时</td><td style="text-align:center;">支持主动超时处理</td><td style="text-align:center;">不支持主动超时处理</td></tr></tbody></table><p>使用场景：</p><p>线程池隔离：请求并发量大，并且<strong>耗时长</strong>(请求耗时长一般计算量大，或者读数据库)：采用线程池隔离策略，这样的话，可以保证大量的<strong>容器</strong></p><p><strong>(tomcat)线程</strong>可用，不会由于服务原因，一直处于阻塞或者等待状态。</p><p>信号量隔离：请求并发量大，并且<strong>耗时短</strong>(请求耗时长一般计算量小，或者读缓存)：采用信号量隔离策略，因为这类服务的返回通常会<strong>非常快</strong>，不会</p><p>占用<strong>容器线程</strong>太长时间，而且也减少了线程切换的开销，提高了缓存服务的效率。</p><h3 id="_3-4-2-sentinel实现" tabindex="-1"><a class="header-anchor" href="#_3-4-2-sentinel实现" aria-hidden="true">#</a> 3.4.2 sentinel实现</h3><p>在添加限流规则时，可以选择两种阈值类型：</p><p><img src="/assets/image-20230628102716278-168829026999558-7f7bd00e.png" alt="image-20230628102716278"></p><p>1、QPS：就是每秒的请求数，在服务之外直接进行拦截处理(类似于：银行的保安)</p><p>2、并发线程数：设置该资源能使用的tomcat线程数的最大值，在服务之内通过指定的线程数来处理请求，线程处理不过来触发限流(类似于：银行业</p><p>务员)</p><h3 id="_3-4-3-案例演示" tabindex="-1"><a class="header-anchor" href="#_3-4-3-案例演示" aria-hidden="true">#</a> 3.4.3 案例演示</h3><p>需求：给spzx-cloud-order服务中的UserFeignClient的查询用户接口设置流控规则，线程数不能超过1，然后利用jemeter测试。</p><p>步骤：</p><p>1、在spzx-cloud-order微服务中添加sentinel的依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--sentinel--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-sentinel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、feign整合sentinel</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># 微服务整合sentinel</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span>

<span class="token comment"># feign整合sentinel</span>
<span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、重启服务，访问根据订单id查询订单接口方法，产生簇点链路</p><p><img src="/assets/image-20230628104104103-168829026999559-c4336282.png" alt="image-20230628104104103"></p><p>4、配置隔离规则</p><p><img src="/assets/image-20230628103312771-168829026999560-51866de8.png" alt="image-20230628103312771"></p><p>单机阈值设置为1表示针对这个资源最多同时有1个线程进行访问。</p><p>5、为了让测试效果更加明显一点，可以让访问/api/user/findUserByUserId/{userId}接口的线程主动休眠一段时间</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span><span class="token string">&quot;hot&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span> <span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} , dateformat: {} &quot;</span> <span class="token punctuation">,</span> header <span class="token punctuation">,</span> patternProperties<span class="token punctuation">.</span><span class="token function">getDateformat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">SECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6、jmeter测试</p><p>选择《阈值类型-线程数&lt;2》</p><p><img src="/assets/image-20220320180841975-168829026999561-e26bf413.png" alt="image-20220320180841975"></p><p>1s内发生10个请求，10个请求由一个线程进行处理，而一个线程处理的请求时长是1s，有很大的可能一部分的请求处理不了就会报错。</p><p>查看运行结果：</p><p><img src="/assets/image-20230628104407024-168829026999562-51033852.png" alt="image-20230628104407024"></p><h3 id="_3-4-4-降级逻辑" tabindex="-1"><a class="header-anchor" href="#_3-4-4-降级逻辑" aria-hidden="true">#</a> 3.4.4 降级逻辑</h3><p>上述请求失败以后，直接返回返回500的错误状态码给用户：</p><p><img src="/assets/image-20230628104558723-168829026999563-a70d4ae3.png" alt="image-20230628104558723"></p><p>而这个错误请求并不是由于用户访问查询订单信息报错导致的，而是由于根据订单查询用户时报错的。因此直接给用户返回500的错误状态码其实不太</p><p>友好，友好的做法当远程调用失败以后，返回一个默认的用户信息给前端，这种备用方案就是我们的降级方案。</p><p>实现步骤：</p><p>1、在spzx-feign-api模块中定义一个类让其实现<strong>UserFeignClient</strong>接口，重写queryById方法，在该方法中编写降级逻辑</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//  com.atguigu.spzx.cloud.feign.fallback;</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserFeignClientFallback</span> <span class="token keyword">implements</span> <span class="token class-name">UserFeignClient</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">queryById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserFeignClientFallback...queryById...方法执行了...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在UserFeignClient接口中注册配置该降级类</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;spzx-cloud-user&quot;</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token class-name">UserFeignClientFallback</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>		
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserFeignClient</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/api/user/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">User</span> <span class="token function">queryById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>	<span class="token comment">// 根据userId查询用户信息的接口方法</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、把该降级类纳入到spring容器中</p><p>方案一：在spzx-cloud-order的启动类上通过@Import注解进行导入</p><p>方案二：使用Spring Boot3的自动化配置原理完成</p><p>4、重启服务，重新配置隔离规则，并进行测试</p><p><img src="/assets/image-20230628105619689-168829026999564-413a3a7f.png" alt="image-20230628105619689"></p><p>此时发现所有请求都是成功的，但是有一部分的用户数据为空。</p><h2 id="_3-5-熔断处理" tabindex="-1"><a class="header-anchor" href="#_3-5-熔断处理" aria-hidden="true">#</a> 3.5 熔断处理</h2><h3 id="_3-5-1-工作原理" tabindex="-1"><a class="header-anchor" href="#_3-5-1-工作原理" aria-hidden="true">#</a> 3.5.1 工作原理</h3><p>熔断降级是解决雪崩问题的重要手段。其思路是由<strong>断路器</strong>统计服务调用的异常比例、异常数、慢请求比例，如果超出阈值则会<strong>熔断</strong>该服务。即拦截访</p><p>问该服务的一切请求；而当服务恢复时，断路器会放行访问该服务的请求。</p><p>断路器控制熔断和放行是通过状态机来完成的：</p><p><img src="/assets/image-20230628105744952-168829026999565-1b7c23ac.png" alt="image-20230628105744952"></p><p>状态机包括三个状态：</p><p>1、closed：关闭状态，断路器放行所有请求，并开始统计异常比例、异常数、慢请求比例。超过阈值则切换到open状态</p><p>2、open：打开状态，服务调用被<strong>熔断</strong>，访问被熔断服务的请求会被拒绝，快速失败，直接走降级逻辑。Open状态5秒后会进入half-open状态</p><p>3、half-open：半开状态，放行一次请求，根据执行结果来判断接下来的操作。</p><p>① 请求成功：则切换到closed状态</p><p>② 请求失败：则切换到open状态</p><p>断路器熔断判断策略有三种：慢调用、异常比例、异常数</p><h3 id="_3-5-2-慢调用比例" tabindex="-1"><a class="header-anchor" href="#_3-5-2-慢调用比例" aria-hidden="true">#</a> 3.5.2 慢调用比例</h3><p><strong>慢调用</strong>：业务的响应时长（RT）大于指定时长的请求认定为慢调用请求。sentinel会统计指定时间内，请求数量超过设定的最小数量的请求并且慢调</p><p>用比例的比例。</p><p>如果慢调用比例大于设定的阈值，则触发熔断。</p><p>例如下述配置：</p><p><img src="/assets/image-20230628105925241-168829026999566-531d487a.png" alt="image-20230628105925241"></p><p>含义：RT超过50ms的调用是慢调用，统计最近10000ms内的请求，如果请求量超过5次，并且慢调用比例不低于0.4，则触发熔断，熔断时长为5秒。</p><p>然后进入half-open状态，放行一次请求做测试。</p><p><strong>案例演示</strong></p><p>需求：给 UserFeginClient的查询用户接口设置降级规则，慢调用的RT阈值为50ms，统计时间为1秒，最小请求数量为5，失败阈值比例为0.4，熔断</p><p>时长为5s</p><p>1、修改spzx-cloud-user中的/api/user/findUserByUserId/{userId}这个接口的业务。通过休眠模拟一个延迟时间</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span><span class="token string">&quot;hot&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span> <span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} , dateformat: {} &quot;</span> <span class="token punctuation">,</span> header <span class="token punctuation">,</span> patternProperties<span class="token punctuation">.</span><span class="token function">getDateformat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 休眠60ms</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时，orderId=101的订单，关联的是id为1的用户，调用时长为60ms：</p><p><img src="/assets/image-20230628110320797-168829026999567-e991712d.png" alt="image-20230628110320797"></p><p>2、设置熔断规则</p><p>下面，给feign接口设置降级规则：</p><p><img src="/assets/image-20230628110431313-168829026999568-3739fd5b.png" alt="image-20230628110431313"></p><p>超过50ms的请求都会被认为是慢请求。</p><p>3、测试</p><p>在浏览器访问：http://localhost:10200/api/order/findOrderByOrderId/102，快速刷新5次以上，可以发现：</p><p><img src="/assets/image-20230628110747710-168829026999570-90d1f957.png" alt="image-20230628110747710"></p><p>在浏览器访问：http://localhost:10200/api/order/findOrderByOrderId/103，竟然也被熔断了!</p><h3 id="_3-5-3-异常比例和异常数" tabindex="-1"><a class="header-anchor" href="#_3-5-3-异常比例和异常数" aria-hidden="true">#</a> 3.5.3 异常比例和异常数</h3><p><strong>异常比例或异常数</strong>：统计指定时间内的调用，如果调用次数超过指定请求数，并且出现异常的比例达到设定的比例阈值（或超过指定异常数），则触</p><p>发熔断。</p><p>例如，一个异常比例设置：</p><table><thead><tr><th></th><th>配置示例</th><th>含义</th></tr></thead><tbody><tr><td>异常比例</td><td><img src="/assets/image-20220320220813427-43991859.png" alt="image-20220320220813427"></td><td>统计最近1000ms内的请求，如果请求量超过5次，并且异常比例不低于0.4，则触发熔断。</td></tr><tr><td>异常数</td><td><img src="/assets/image-20220320220955821-50e5f7d5.png" alt="image-20220320220955821"></td><td>统计最近1000ms内的请求，如果请求量超过5次，并且异常比例不低于2次，则触发熔断。</td></tr></tbody></table><p><strong>案例演示</strong></p><p>需求：给 UserFeginClient的查询用户接口设置降级规则，统计时间为1秒，最小请求数量为5，异常失败阈值比例为0.4，熔断时长为5s。</p><p>步骤：</p><p>1、修改spzx-cloud-user中的/api/user/findUserByUserId/{userId}这个接口的业务。手动抛出异常，以触发异常比例的熔断：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span><span class="token string">&quot;hot&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/findUserByUserId/{userId}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findUserByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> userId <span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;Truth&quot;</span> <span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token class-name">String</span> header<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;UserController...findUserByUserId方法执行了... ,header: {} , dateformat: {} &quot;</span> <span class="token punctuation">,</span> header <span class="token punctuation">,</span> patternProperties<span class="token punctuation">.</span><span class="token function">getDateformat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>userId <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;手动抛出异常，触发异常比例熔断规则&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> userService<span class="token punctuation">.</span><span class="token function">findUserByUserId</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也就是说，id为2时，就会触发异常。</p><p>2、设置熔断规则</p><p>下面，给feign接口设置降级规则：</p><p><img src="/assets/image-20230628111748553-168829026999569-4449c06c.png" alt="image-20230628111748553"></p><p>在5次请求中，只要异常比例超过0.4，也就是有2次以上的异常，就会触发熔断。</p><p>3、测试</p><p>在浏览器快速访问：http://localhost:10200/api/order/findOrderByOrderId/102，快速刷新5次以上，触发熔断：</p><p><img src="/assets/image-20230628111911486-168829026999571-7d538b9f.png" alt="image-20230628111911486"></p><p>此时，我们去访问本来应该正常的103：</p><p><img src="/assets/image-20230628111941037-168829026999572-bc2f052b.png" alt="image-20230628111941037"></p><h2 id="_3-6-规则持久化" tabindex="-1"><a class="header-anchor" href="#_3-6-规则持久化" aria-hidden="true">#</a> 3.6 规则持久化</h2><h3 id="_3-6-1-规则持久化概述" tabindex="-1"><a class="header-anchor" href="#_3-6-1-规则持久化概述" aria-hidden="true">#</a> 3.6.1 规则持久化概述</h3><p>默认情况下sentinel没有对规则进行持久化，让对服务进行重启以后，Sentinel规则将消失，生产环境需要将配置规则进行持久化</p><p>持久化思想：</p><p><strong>将限流配置规则持久化进Nacos保存</strong>，只要刷新spzx-cloud-order某个rest地址，sentinel控制台的流控规则就能看到，只要Nacos里面的配置</p><p>不删除，针对spzx-cloud-order上Sentinel上的流控规则持续有效</p><h3 id="_3-6-2-规则持久化实战" tabindex="-1"><a class="header-anchor" href="#_3-6-2-规则持久化实战" aria-hidden="true">#</a> 3.6.2 规则持久化实战</h3><h4 id="nacos添加规则配置" tabindex="-1"><a class="header-anchor" href="#nacos添加规则配置" aria-hidden="true">#</a> Nacos添加规则配置</h4><p>在nacos配置中心中添加规则配置</p><p><img src="/assets/image-20230628113302101-168829026999573-ec0d28cc.png" alt="image-20230628113302101"></p><p>规则配置内容如下所示：</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
         <span class="token key atrule">&quot;resource&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;/testA&quot;</span><span class="token punctuation">,</span>
         <span class="token key atrule">&quot;limitApp&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>
         <span class="token key atrule">&quot;grade&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
         <span class="token key atrule">&quot;count&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
         <span class="token key atrule">&quot;strategy&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
         <span class="token key atrule">&quot;controlBehavior&quot;</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
         <span class="token key atrule">&quot;clusterMode&quot;</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>规则说明：</p><p><img src="/assets/image-20230628113125212-168829026999574-80b85263.png" alt="image-20230628113125212"></p><h4 id="读取nacos规则配置" tabindex="-1"><a class="header-anchor" href="#读取nacos规则配置" aria-hidden="true">#</a> 读取nacos规则配置</h4><p>微服务可以从nacos配置中心读取规则配置信息然后进行使用。</p><p>具体步骤如下所示：</p><p>1、在spzx-cloud-order微服务中的pom.xml文件中添加如下依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在spzx-cloud-order微服务的application.yml文件添加如下配置</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># 配置数据库的连接信息</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>
      <span class="token key atrule">transport</span><span class="token punctuation">:</span>
        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8080</span>
      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">ds1</span><span class="token punctuation">:</span>
          <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
            <span class="token key atrule">serverAddr</span><span class="token punctuation">:</span> 192.168.136.142<span class="token punctuation">:</span><span class="token number">8848</span>
            <span class="token key atrule">dataId</span><span class="token punctuation">:</span> sentinel<span class="token punctuation">-</span>rules
            <span class="token key atrule">groupId</span><span class="token punctuation">:</span> DEFAULT_GROUP
            <span class="token key atrule">dataType</span><span class="token punctuation">:</span> json
            <span class="token key atrule">ruleType</span><span class="token punctuation">:</span> flow
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、重启spzx-cloud-order微服务，访问任意一个接口，此时就可以在sentinel的控制台看到对应的流控规则了</p><p><img src="/assets/image-20230628114515666-168829026999575-236bf437.png" alt="image-20230628114515666"></p><p>4、重新启动spzx-cloud-order微服务服务再看sentinel控制台是否还存在该规则信息</p><p>扎一看还是没有，稍等一会儿,多次调用 http://localhost:10200/api/order/findOrderByOrderId/101，重新配置出现了，持久化验证通过！</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1409117198@qq.com">laohai</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-8007fa1b.js" defer></script>
  </body>
</html>
